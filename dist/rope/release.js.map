{
  "version": 3,
  "sources": ["../white-dwarf/submodules/ecsy/node_modules/events/events.js", "../white-dwarf/node_modules/js-file-download/file-download.js", "../white-dwarf/submodules/ecsy/src/Utils.js", "../white-dwarf/submodules/ecsy/src/SystemManager.js", "../white-dwarf/submodules/ecsy/src/ObjectPool.js", "../white-dwarf/submodules/ecsy/src/EventDispatcher.js", "../white-dwarf/submodules/ecsy/src/Query.js", "../white-dwarf/submodules/ecsy/src/QueryManager.js", "../white-dwarf/submodules/ecsy/src/Component.js", "../white-dwarf/submodules/ecsy/src/SystemStateComponent.js", "../white-dwarf/submodules/ecsy/src/EntityManager.js", "../white-dwarf/submodules/ecsy/src/ComponentManager.js", "../white-dwarf/submodules/ecsy/src/Version.js", "../white-dwarf/submodules/ecsy/src/WrapImmutableComponent.js", "../white-dwarf/submodules/ecsy/src/Entity.js", "../white-dwarf/submodules/ecsy/src/World.js", "../white-dwarf/src/Core/ComponentRegistry.ts", "../white-dwarf/src/Core/Context/RenderContext.ts", "../white-dwarf/src/Core/CoreSetup.ts", "../white-dwarf/src/Core/index.ts", "../white-dwarf/submodules/ecsy/src/Types.js", "../white-dwarf/node_modules/gl-matrix/esm/common.js", "../white-dwarf/node_modules/gl-matrix/esm/mat3.js", "../white-dwarf/node_modules/gl-matrix/esm/mat4.js", "../white-dwarf/node_modules/gl-matrix/esm/quat.js", "../white-dwarf/node_modules/gl-matrix/esm/vec3.js", "../white-dwarf/node_modules/gl-matrix/esm/vec4.js", "../white-dwarf/node_modules/gl-matrix/esm/vec2.js", "../white-dwarf/src/Mathematics/Quaternion.ts", "../white-dwarf/src/Mathematics/Vector3.ts", "../white-dwarf/src/Core/Locomotion/DataComponent/TransformData3D.ts", "../white-dwarf/submodules/ecsy/src/System.js", "../white-dwarf/src/Core/Physics/DataComponents/EulerVelocityData3D.ts", "../white-dwarf/src/Core/Physics/DataComponents/MassData.ts", "../white-dwarf/src/Core/Physics/Systems/EulerVelocity3DGravitySystem.ts", "../white-dwarf/src/Core/Physics/Systems/EulerVelocity3DMoveSystem.ts", "../white-dwarf/src/Core/Physics/DataComponents/ConstraintData.ts", "../white-dwarf/src/Core/Physics/Systems/JakobsenConstraintSystem.ts", "../white-dwarf/src/Core/Physics/DataComponents/SyncTransform3DData.ts", "../white-dwarf/src/Core/Physics/Systems/Transform3DSyncSystem.ts", "../white-dwarf/src/Core/Physics/DataComponents/VerletVelocityData3D.ts", "../white-dwarf/src/Core/Physics/Systems/VerletVelocity3DGravitySystem.ts", "../white-dwarf/src/Core/Physics/Systems/VerletVelocity3DMoveSystem.ts", "../white-dwarf/src/Core/Render/DataComponent/PerspectiveCameraData3D.ts", "../white-dwarf/src/Core/Render/DataComponent/OrthographicCameraData3D.ts", "../white-dwarf/submodules/ecsy/src/TagComponent.js", "../white-dwarf/src/Core/Render/TagComponent/MainCameraTag.ts", "../white-dwarf/src/Core/Render/System/Canvas3DRenderer.ts", "../white-dwarf/src/Core/Render/System/BuildInRenderers/Canvas3DConstraintRenderer.ts", "../white-dwarf/src/Mathematics/LineFrame3DSegment.ts", "../white-dwarf/src/Core/Render/DataComponent/LineFrameRenderData3D.ts", "../white-dwarf/src/Core/Render/System/BuildInRenderers/Canvas3DLineFrameRenderer.ts", "../white-dwarf/src/Core/Render/System/ClearCanvasSystem.ts", "../white-dwarf/src/Core/Render/RenderSystem3DRegister.ts", "../white-dwarf/src/Core/Render/TagComponent/MainCameraInitTag.ts", "../white-dwarf/src/Core/Render/System/MainCameraInitSystem.ts", "../white-dwarf/src/Editor/TagComponent/EditorSceneCamTag.ts", "../white-dwarf/src/Editor/TagComponent/EditorSelectedTag.ts", "../white-dwarf/src/Core/Serialization/EntitySerializer.ts", "../white-dwarf/src/Core/Serialization/WorldSerializer.ts", "../white-dwarf/src/Editor/EditorContext.ts", "../white-dwarf/src/Mathematics/Vector2.ts", "../white-dwarf/src/Utils/System/Cam3DDragSystem.ts", "../white-dwarf/src/Editor/System/EditorViewPort3DSystem.ts", "../white-dwarf/src/Editor/EditorSystem3DRegister.ts", "../white-dwarf/src/Editor/System/EditorCamTagAppendSystem.ts", "../white-dwarf/src/Utils/TagComponents/SelectableObject.ts", "../white-dwarf/src/Editor/System/EditorInspectorSystem.ts", "../white-dwarf/src/Core/Locomotion/DataComponent/TransformData2D.ts", "../white-dwarf/src/Core/Render/DataComponent/CameraData2D.ts", "../white-dwarf/src/Core/Render/System/Canvas2DRenderer.ts", "../white-dwarf/src/Editor/System/EditorViewPort2DSystems.ts", "../white-dwarf/src/Utils/System/Object3DSelectSystem.ts", "../node_modules/gl-matrix/esm/common.js", "../node_modules/gl-matrix/esm/mat4.js", "../node_modules/gl-matrix/esm/vec3.js", "../src/DataComponents/ClothInitData.ts", "../src/Systems/ClothInitSystem.ts", "../src/Systems/ClothPreviewRenderer.ts", "../src/DataComponents/RopeInitData.ts", "../src/Systems/RopeInitSystem.ts", "../src/Systems/RopePreviewRenderer.ts", "../src/index.ts", "../src/release.ts"],
  "sourcesContent": ["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n", "module.exports = function(data, filename, mime, bom) {\n    var blobData = (typeof bom !== 'undefined') ? [bom, data] : [data]\n    var blob = new Blob(blobData, {type: mime || 'application/octet-stream'});\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else {\n        var blobURL = (window.URL && window.URL.createObjectURL) ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n        var tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n\n        // Fixes \"webkit blob resource error 1\"\n        setTimeout(function() {\n            document.body.removeChild(tempLink);\n            window.URL.revokeObjectURL(blobURL);\n        }, 200)\n    }\n}\n", "/**\r\n * Return the name of a component\r\n * @param {Component} Component\r\n * @private\r\n */\r\nexport function getName(Component) {\r\n  return Component.name;\r\n}\r\n\r\n/**\r\n * Return a valid property name for the Component\r\n * @param {Component} Component\r\n * @private\r\n */\r\nexport function componentPropertyName(Component) {\r\n  return getName(Component);\r\n}\r\n\r\n/**\r\n * Get a key from a list of components\r\n * @param {Array(Component)} Components Array of components to generate the key\r\n * @private\r\n */\r\nexport function queryKey(Components) {\r\n  var ids = [];\r\n  for (var n = 0; n < Components.length; n++) {\r\n    var T = Components[n];\r\n\r\n    if (!componentRegistered(T)) {\r\n      throw new Error(`Tried to create a query with an unregistered component`);\r\n    }\r\n\r\n    if (typeof T === \"object\") {\r\n      var operator = T.operator === \"not\" ? \"!\" : T.operator;\r\n      ids.push(operator + T.Component._typeId);\r\n    } else {\r\n      ids.push(T._typeId);\r\n    }\r\n  }\r\n\r\n  return ids.sort().join(\"-\");\r\n}\r\n\r\n// Detector for browser's \"window\"\r\nexport const hasWindow = typeof window !== \"undefined\";\r\n\r\n// performance.now() \"polyfill\"\r\nexport const now =\r\n  hasWindow && typeof window.performance !== \"undefined\"\r\n    ? performance.now.bind(performance)\r\n    : Date.now.bind(Date);\r\n\r\nexport function componentRegistered(T) {\r\n  return (\r\n    (typeof T === \"object\" && T.Component._typeId !== undefined) ||\r\n    (T.isComponent && T._typeId !== undefined)\r\n  );\r\n}\r\n", "import { now } from \"./Utils.js\";\r\n\r\nexport class SystemManager {\r\n  constructor(world) {\r\n    this._systems = [];\r\n    this._executeSystems = []; // Systems that have `execute` method\r\n    this.world = world;\r\n    this.lastExecutedSystem = null;\r\n  }\r\n\r\n  registerSystem(SystemClass, attributes) {\r\n    if (!SystemClass.isSystem) {\r\n      throw new Error(\r\n        `System '${SystemClass.name}' does not extend 'System' class`\r\n      );\r\n    }\r\n\r\n    if (this.getSystem(SystemClass) !== undefined) {\r\n      console.warn(`System '${SystemClass.getName()}' already registered.`);\r\n      return this;\r\n    }\r\n\r\n    var system = new SystemClass(this.world, attributes);\r\n    if (system.init) system.init(attributes);\r\n    system.order = this._systems.length;\r\n    this._systems.push(system);\r\n    if (system.execute) {\r\n      this._executeSystems.push(system);\r\n      this.sortSystems();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  unregisterSystem(SystemClass) {\r\n    let system = this.getSystem(SystemClass);\r\n    if (system === undefined) {\r\n      console.warn(\r\n        `Can unregister system '${SystemClass.getName()}'. It doesn't exist.`\r\n      );\r\n      return this;\r\n    }\r\n\r\n    this._systems.splice(this._systems.indexOf(system), 1);\r\n\r\n    if (system.execute) {\r\n      this._executeSystems.splice(this._executeSystems.indexOf(system), 1);\r\n    }\r\n\r\n    // @todo Add system.unregister() call to free resources\r\n    return this;\r\n  }\r\n\r\n  sortSystems() {\r\n    this._executeSystems.sort((a, b) => {\r\n      return a.priority - b.priority || a.order - b.order;\r\n    });\r\n  }\r\n\r\n  getSystem(SystemClass) {\r\n    return this._systems.find((s) => s instanceof SystemClass);\r\n  }\r\n\r\n  getSystems() {\r\n    return this._systems;\r\n  }\r\n\r\n  removeSystem(SystemClass) {\r\n    var index = this._systems.indexOf(SystemClass);\r\n    if (!~index) return;\r\n\r\n    this._systems.splice(index, 1);\r\n  }\r\n\r\n  executeSystem(system, delta, time) {\r\n    if (system.initialized) {\r\n      if (system.canExecute()) {\r\n        let startTime = now();\r\n        system.execute(delta, time);\r\n        system.executeTime = now() - startTime;\r\n        this.lastExecutedSystem = system;\r\n        system.clearEvents();\r\n      }\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    this._executeSystems.forEach((system) => system.stop());\r\n  }\r\n\r\n  execute(delta, time, forcePlay) {\r\n    this._executeSystems.forEach(\r\n      (system) =>\r\n        (forcePlay || system.enabled) && this.executeSystem(system, delta, time)\r\n    );\r\n  }\r\n\r\n  stats() {\r\n    var stats = {\r\n      numSystems: this._systems.length,\r\n      systems: {},\r\n    };\r\n\r\n    for (var i = 0; i < this._systems.length; i++) {\r\n      var system = this._systems[i];\r\n      var systemStats = (stats.systems[system.getName()] = {\r\n        queries: {},\r\n        executeTime: system.executeTime,\r\n      });\r\n      for (var name in system.ctx) {\r\n        systemStats.queries[name] = system.ctx[name].stats();\r\n      }\r\n    }\r\n\r\n    return stats;\r\n  }\r\n}\r\n", "export class ObjectPool {\r\n  // @todo Add initial size\r\n  constructor(T, initialSize) {\r\n    this.freeList = [];\r\n    this.count = 0;\r\n    this.T = T;\r\n    this.isObjectPool = true;\r\n\r\n    if (typeof initialSize !== \"undefined\") {\r\n      this.expand(initialSize);\r\n    }\r\n  }\r\n\r\n  acquire() {\r\n    // Grow the list by 20%ish if we're out\r\n    if (this.freeList.length <= 0) {\r\n      this.expand(Math.round(this.count * 0.2) + 1);\r\n    }\r\n\r\n    var item = this.freeList.pop();\r\n\r\n    return item;\r\n  }\r\n\r\n  release(item) {\r\n    item.reset();\r\n    this.freeList.push(item);\r\n  }\r\n\r\n  expand(count) {\r\n    for (var n = 0; n < count; n++) {\r\n      var clone = new this.T();\r\n      clone._pool = this;\r\n      this.freeList.push(clone);\r\n    }\r\n    this.count += count;\r\n  }\r\n\r\n  totalSize() {\r\n    return this.count;\r\n  }\r\n\r\n  totalFree() {\r\n    return this.freeList.length;\r\n  }\r\n\r\n  totalUsed() {\r\n    return this.count - this.freeList.length;\r\n  }\r\n}\r\n", "/**\r\n * @private\r\n * @class EventDispatcher\r\n */\r\nexport default class EventDispatcher {\r\n  constructor() {\r\n    this._listeners = {};\r\n    this.stats = {\r\n      fired: 0,\r\n      handled: 0,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Add an event listener\r\n   * @param {String} eventName Name of the event to listen\r\n   * @param {Function} listener Callback to trigger when the event is fired\r\n   */\r\n  addEventListener(eventName, listener) {\r\n    let listeners = this._listeners;\r\n    if (listeners[eventName] === undefined) {\r\n      listeners[eventName] = [];\r\n    }\r\n\r\n    if (listeners[eventName].indexOf(listener) === -1) {\r\n      listeners[eventName].push(listener);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if an event listener is already added to the list of listeners\r\n   * @param {String} eventName Name of the event to check\r\n   * @param {Function} listener Callback for the specified event\r\n   */\r\n  hasEventListener(eventName, listener) {\r\n    return (\r\n      this._listeners[eventName] !== undefined &&\r\n      this._listeners[eventName].indexOf(listener) !== -1\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove an event listener\r\n   * @param {String} eventName Name of the event to remove\r\n   * @param {Function} listener Callback for the specified event\r\n   */\r\n  removeEventListener(eventName, listener) {\r\n    var listenerArray = this._listeners[eventName];\r\n    if (listenerArray !== undefined) {\r\n      var index = listenerArray.indexOf(listener);\r\n      if (index !== -1) {\r\n        listenerArray.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Dispatch an event\r\n   * @param {String} eventName Name of the event to dispatch\r\n   * @param {Entity} entity (Optional) Entity to emit\r\n   * @param {Component} component\r\n   */\r\n  dispatchEvent(eventName, entity, component) {\r\n    this.stats.fired++;\r\n\r\n    var listenerArray = this._listeners[eventName];\r\n    if (listenerArray !== undefined) {\r\n      var array = listenerArray.slice(0);\r\n\r\n      for (var i = 0; i < array.length; i++) {\r\n        array[i].call(this, entity, component);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset stats counters\r\n   */\r\n  resetCounters() {\r\n    this.stats.fired = this.stats.handled = 0;\r\n  }\r\n}\r\n", "import EventDispatcher from \"./EventDispatcher.js\";\r\nimport { queryKey } from \"./Utils.js\";\r\n\r\nexport default class Query {\r\n  /**\r\n   * @param {Array(Component)} Components List of types of components to query\r\n   */\r\n  constructor(Components, manager) {\r\n    this.Components = [];\r\n    this.NotComponents = [];\r\n\r\n    Components.forEach((component) => {\r\n      if (typeof component === \"object\") {\r\n        this.NotComponents.push(component.Component);\r\n      } else {\r\n        this.Components.push(component);\r\n      }\r\n    });\r\n\r\n    if (this.Components.length === 0) {\r\n      throw new Error(\"Can't create a query without components\");\r\n    }\r\n\r\n    this.entities = [];\r\n\r\n    this.eventDispatcher = new EventDispatcher();\r\n\r\n    // This query is being used by a reactive system\r\n    this.reactive = false;\r\n\r\n    this.key = queryKey(Components);\r\n\r\n    // Fill the query with the existing entities\r\n    for (var i = 0; i < manager._entities.length; i++) {\r\n      var entity = manager._entities[i];\r\n      if (this.match(entity)) {\r\n        // @todo ??? this.addEntity(entity); => preventing the event to be generated\r\n        entity.queries.push(this);\r\n        this.entities.push(entity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add entity to this query\r\n   * @param {Entity} entity\r\n   */\r\n  addEntity(entity) {\r\n    entity.queries.push(this);\r\n    this.entities.push(entity);\r\n\r\n    this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED, entity);\r\n  }\r\n\r\n  /**\r\n   * Remove entity from this query\r\n   * @param {Entity} entity\r\n   */\r\n  removeEntity(entity) {\r\n    let index = this.entities.indexOf(entity);\r\n    if (~index) {\r\n      this.entities.splice(index, 1);\r\n\r\n      index = entity.queries.indexOf(this);\r\n      entity.queries.splice(index, 1);\r\n\r\n      this.eventDispatcher.dispatchEvent(\r\n        Query.prototype.ENTITY_REMOVED,\r\n        entity\r\n      );\r\n    }\r\n  }\r\n\r\n  match(entity) {\r\n    return (\r\n      entity.hasAllComponents(this.Components) &&\r\n      !entity.hasAnyComponents(this.NotComponents)\r\n    );\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      key: this.key,\r\n      reactive: this.reactive,\r\n      components: {\r\n        included: this.Components.map((C) => C.name),\r\n        not: this.NotComponents.map((C) => C.name),\r\n      },\r\n      numEntities: this.entities.length,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Return stats for this query\r\n   */\r\n  stats() {\r\n    return {\r\n      numComponents: this.Components.length,\r\n      numEntities: this.entities.length,\r\n    };\r\n  }\r\n}\r\n\r\nQuery.prototype.ENTITY_ADDED = \"Query#ENTITY_ADDED\";\r\nQuery.prototype.ENTITY_REMOVED = \"Query#ENTITY_REMOVED\";\r\nQuery.prototype.COMPONENT_CHANGED = \"Query#COMPONENT_CHANGED\";\r\n", "import Query from \"./Query.js\";\r\nimport { queryKey } from \"./Utils.js\";\r\n\r\n/**\r\n * @private\r\n * @class QueryManager\r\n */\r\nexport default class QueryManager {\r\n  constructor(world) {\r\n    this._world = world;\r\n\r\n    // Queries indexed by a unique identifier for the components it has\r\n    this._queries = {};\r\n  }\r\n\r\n  onEntityRemoved(entity) {\r\n    for (var queryName in this._queries) {\r\n      var query = this._queries[queryName];\r\n      if (entity.queries.indexOf(query) !== -1) {\r\n        query.removeEntity(entity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Callback when a component is added to an entity\r\n   * @param {Entity} entity Entity that just got the new component\r\n   * @param {Component} Component Component added to the entity\r\n   */\r\n  onEntityComponentAdded(entity, Component) {\r\n    // @todo Use bitmask for checking components?\r\n\r\n    // Check each indexed query to see if we need to add this entity to the list\r\n    for (var queryName in this._queries) {\r\n      var query = this._queries[queryName];\r\n\r\n      if (\r\n        !!~query.NotComponents.indexOf(Component) &&\r\n        ~query.entities.indexOf(entity)\r\n      ) {\r\n        query.removeEntity(entity);\r\n        continue;\r\n      }\r\n\r\n      // Add the entity only if:\r\n      // Component is in the query\r\n      // and Entity has ALL the components of the query\r\n      // and Entity is not already in the query\r\n      if (\r\n        !~query.Components.indexOf(Component) ||\r\n        !query.match(entity) ||\r\n        ~query.entities.indexOf(entity)\r\n      )\r\n        continue;\r\n\r\n      query.addEntity(entity);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Callback when a component is removed from an entity\r\n   * @param {Entity} entity Entity to remove the component from\r\n   * @param {Component} Component Component to remove from the entity\r\n   */\r\n  onEntityComponentRemoved(entity, Component) {\r\n    for (var queryName in this._queries) {\r\n      var query = this._queries[queryName];\r\n\r\n      if (\r\n        !!~query.NotComponents.indexOf(Component) &&\r\n        !~query.entities.indexOf(entity) &&\r\n        query.match(entity)\r\n      ) {\r\n        query.addEntity(entity);\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        !!~query.Components.indexOf(Component) &&\r\n        !!~query.entities.indexOf(entity) &&\r\n        !query.match(entity)\r\n      ) {\r\n        query.removeEntity(entity);\r\n        continue;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a query for the specified components\r\n   * @param {Component} Components Components that the query should have\r\n   */\r\n  getQuery(Components) {\r\n    var key = queryKey(Components);\r\n    var query = this._queries[key];\r\n    if (!query) {\r\n      this._queries[key] = query = new Query(Components, this._world);\r\n    }\r\n    return query;\r\n  }\r\n\r\n  /**\r\n   * Return some stats from this class\r\n   */\r\n  stats() {\r\n    var stats = {};\r\n    for (var queryName in this._queries) {\r\n      stats[queryName] = this._queries[queryName].stats();\r\n    }\r\n    return stats;\r\n  }\r\n}\r\n", "import EventEmitter from \"events\";\r\n\r\nexport class Component {\r\n  constructor(props) {\r\n    if (props !== false) {\r\n      const schema = this.constructor.schema;\r\n\r\n      for (const key in schema) {\r\n        if (props && props.hasOwnProperty(key)) {\r\n          this[key] = props[key];\r\n        } else {\r\n          const schemaProp = schema[key];\r\n          if (schemaProp.hasOwnProperty(\"default\")) {\r\n            this[key] = schemaProp.type.clone(schemaProp.default);\r\n          } else {\r\n            const type = schemaProp.type;\r\n            this[key] = type.clone(type.default);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (process.env.NODE_ENV !== \"production\" && props !== undefined) {\r\n        this.checkUndefinedAttributes(props);\r\n      }\r\n    }\r\n\r\n    this.eventEmitter = new EventEmitter();\r\n\r\n    this._pool = null;\r\n\r\n    this.onInspector = null;\r\n    this.useDefaultInspector = true;\r\n  }\r\n\r\n  copy(source) {\r\n    const schema = this.constructor.schema;\r\n\r\n    for (const key in schema) {\r\n      const prop = schema[key];\r\n\r\n      if (source.hasOwnProperty(key)) {\r\n        this[key] = prop.type.copy(source[key], this[key]);\r\n      }\r\n    }\r\n\r\n    // @DEBUG\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n      this.checkUndefinedAttributes(source);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  clone() {\r\n    return new this.constructor().copy(this);\r\n  }\r\n\r\n  reset() {\r\n    const schema = this.constructor.schema;\r\n\r\n    for (const key in schema) {\r\n      const schemaProp = schema[key];\r\n\r\n      if (schemaProp.hasOwnProperty(\"default\")) {\r\n        this[key] = schemaProp.type.copy(schemaProp.default, this[key]);\r\n      } else {\r\n        const type = schemaProp.type;\r\n        this[key] = type.copy(type.default, this[key]);\r\n      }\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    if (this._pool) {\r\n      this._pool.release(this);\r\n    }\r\n  }\r\n\r\n  getName() {\r\n    return this.constructor.getName();\r\n  }\r\n\r\n  checkUndefinedAttributes(src) {\r\n    const schema = this.constructor.schema;\r\n\r\n    // Check that the attributes defined in source are also defined in the schema\r\n    Object.keys(src).forEach((srcKey) => {\r\n      if (!schema.hasOwnProperty(srcKey)) {\r\n        console.warn(\r\n          `Trying to set attribute '${srcKey}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nComponent.schema = {};\r\nComponent.isComponent = true;\r\nComponent.getName = function () {\r\n  return this.displayName || this.name;\r\n};\r\n\r\nexport const COMPONENT_CHANGE_EVENT = \"COMPONENT_CHANGE_EVENT\";\r\n", "import { Component } from \"./Component.js\";\r\n\r\nexport class SystemStateComponent extends Component {}\r\n\r\nSystemStateComponent.isSystemStateComponent = true;\r\n", "import { ObjectPool } from \"./ObjectPool.js\";\r\nimport QueryManager from \"./QueryManager.js\";\r\nimport EventDispatcher from \"./EventDispatcher.js\";\r\nimport { SystemStateComponent } from \"./SystemStateComponent.js\";\r\n\r\nclass EntityPool extends ObjectPool {\r\n  constructor(entityManager, entityClass, initialSize) {\r\n    super(entityClass, undefined);\r\n    this.entityManager = entityManager;\r\n\r\n    if (typeof initialSize !== \"undefined\") {\r\n      this.expand(initialSize);\r\n    }\r\n  }\r\n\r\n  expand(count) {\r\n    for (var n = 0; n < count; n++) {\r\n      var clone = new this.T(this.entityManager);\r\n      clone._pool = this;\r\n      this.freeList.push(clone);\r\n    }\r\n    this.count += count;\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * @class EntityManager\r\n */\r\nexport class EntityManager {\r\n  constructor(world) {\r\n    this.world = world;\r\n    this.componentsManager = world.componentsManager;\r\n\r\n    // All the entities in this instance\r\n    this._entities = [];\r\n    this._nextEntityId = 0;\r\n\r\n    this._entitiesByNames = {};\r\n    this._entitiesById = {};\r\n\r\n    this._queryManager = new QueryManager(this);\r\n    this.eventDispatcher = new EventDispatcher();\r\n    this._entityPool = new EntityPool(\r\n      this,\r\n      this.world.options.entityClass,\r\n      this.world.options.entityPoolSize\r\n    );\r\n\r\n    // Deferred deletion\r\n    this.entitiesWithComponentsToRemove = [];\r\n    this.entitiesToRemove = [];\r\n    this.deferredRemovalEnabled = true;\r\n  }\r\n\r\n  getEntityByName(name) {\r\n    return this._entitiesByNames[name];\r\n  }\r\n\r\n  getEntityById(id) {\r\n    return this._entitiesById[id];\r\n  }\r\n\r\n  getAllEntities() {\r\n    return this._entities;\r\n  }\r\n\r\n  idExists(id) {\r\n    return this._entitiesById[id] !== undefined;\r\n  }\r\n\r\n  /**\r\n   * Create a new entity\r\n   */\r\n  createEntity(name, id) {\r\n    var entity = this._entityPool.acquire();\r\n    entity.alive = true;\r\n    entity.name = name || \"\";\r\n    if (name) {\r\n      if (this._entitiesByNames[name]) {\r\n        console.warn(`Entity name '${name}' already exist`);\r\n      } else {\r\n        this._entitiesByNames[name] = entity;\r\n      }\r\n    }\r\n    // If the id is specified, use it.\r\n    if (id) {\r\n      entity.id = id;\r\n      // Remove all the duplicated in the pool free list.\r\n      this._entityPool.freeList = this._entityPool.freeList.filter(\r\n        e => e.id !== id\r\n      )\r\n    }\r\n    this._entitiesById[entity.id] = entity;\r\n\r\n    this._entities.push(entity);\r\n    this.eventDispatcher.dispatchEvent(ENTITY_CREATED, entity);\r\n    this.world.onEntityChanged.forEach(callback => {\r\n      callback(this._entities);\r\n    });\r\n    return entity;\r\n  }\r\n\r\n  // COMPONENTS\r\n\r\n  /**\r\n   * Add a component to an entity\r\n   * @param {Entity} entity Entity where the component will be added\r\n   * @param {Component} Component Component to be added to the entity\r\n   * @param {Object} values Optional values to replace the default attributes\r\n   */\r\n  entityAddComponent(entity, Component, values) {\r\n    // @todo Probably define Component._typeId with a default value and avoid using typeof\r\n    if (\r\n      typeof Component._typeId === \"undefined\" &&\r\n      !this.world.componentsManager._ComponentsMap[Component._typeId]\r\n    ) {\r\n      throw new Error(\r\n        `Attempted to add unregistered component \"${Component.getName()}\"`\r\n      );\r\n    }\r\n\r\n    if (~entity._ComponentTypes.indexOf(Component)) {\r\n      if (process.env.NODE_ENV !== \"production\") {\r\n        console.warn(\r\n          \"Component type already exists on entity.\",\r\n          entity,\r\n          Component.getName()\r\n        );\r\n      }\r\n      return;\r\n    }\r\n\r\n    entity._ComponentTypes.push(Component);\r\n\r\n    if (Component.__proto__ === SystemStateComponent) {\r\n      entity.numStateComponents++;\r\n    }\r\n\r\n    var componentPool = this.world.componentsManager.getComponentsPool(\r\n      Component\r\n    );\r\n\r\n    var component = componentPool\r\n      ? componentPool.acquire()\r\n      : new Component(values);\r\n\r\n    if (componentPool && values) {\r\n      component.copy(values);\r\n    }\r\n\r\n    entity._components[Component._typeId] = component;\r\n\r\n    this._queryManager.onEntityComponentAdded(entity, Component);\r\n    this.world.componentsManager.componentAddedToEntity(Component);\r\n\r\n    this.eventDispatcher.dispatchEvent(COMPONENT_ADDED, entity, Component);\r\n  }\r\n\r\n  /**\r\n   * Remove a component from an entity\r\n   * @param {Entity} entity Entity which will get removed the component\r\n   * @param {*} Component Component to remove from the entity\r\n   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)\r\n   */\r\n  entityRemoveComponent(entity, Component, immediately) {\r\n    var index = entity._ComponentTypes.indexOf(Component);\r\n    if (!~index) return;\r\n\r\n    this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE, entity, Component);\r\n\r\n    if (immediately) {\r\n      this._entityRemoveComponentSync(entity, Component, index);\r\n    } else {\r\n      if (entity._ComponentTypesToRemove.length === 0)\r\n        this.entitiesWithComponentsToRemove.push(entity);\r\n\r\n      entity._ComponentTypes.splice(index, 1);\r\n      entity._ComponentTypesToRemove.push(Component);\r\n\r\n      entity._componentsToRemove[Component._typeId] =\r\n        entity._components[Component._typeId];\r\n      delete entity._components[Component._typeId];\r\n    }\r\n\r\n    // Check each indexed query to see if we need to remove it\r\n    this._queryManager.onEntityComponentRemoved(entity, Component);\r\n\r\n    if (Component.__proto__ === SystemStateComponent) {\r\n      entity.numStateComponents--;\r\n\r\n      // Check if the entity was a ghost waiting for the last system state component to be removed\r\n      if (entity.numStateComponents === 0 && !entity.alive) {\r\n        entity.remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  _entityRemoveComponentSync(entity, Component, index) {\r\n    // Remove T listing on entity and property ref, then free the component.\r\n    entity._ComponentTypes.splice(index, 1);\r\n    var component = entity._components[Component._typeId];\r\n    delete entity._components[Component._typeId];\r\n    component.dispose();\r\n    this.world.componentsManager.componentRemovedFromEntity(Component);\r\n  }\r\n\r\n  /**\r\n   * Remove all the components from an entity\r\n   * @param {Entity} entity Entity from which the components will be removed\r\n   */\r\n  entityRemoveAllComponents(entity, immediately) {\r\n    let Components = entity._ComponentTypes;\r\n\r\n    for (let j = Components.length - 1; j >= 0; j--) {\r\n      if (Components[j].__proto__ !== SystemStateComponent)\r\n        this.entityRemoveComponent(entity, Components[j], immediately);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the entity from this manager. It will clear also its components\r\n   * @param {Entity} entity Entity to remove from the manager\r\n   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)\r\n   */\r\n  removeEntity(entity, immediately) {\r\n    var index = this._entities.indexOf(entity);\r\n\r\n    if (!~index) throw new Error(\"Tried to remove entity not in list\");\r\n\r\n    entity.alive = false;\r\n    this.entityRemoveAllComponents(entity, immediately);\r\n\r\n    if (entity.numStateComponents === 0) {\r\n      // Remove from entity list\r\n      this.eventDispatcher.dispatchEvent(ENTITY_REMOVED, entity);\r\n      this._queryManager.onEntityRemoved(entity);\r\n      if (immediately === true) {\r\n        this._releaseEntity(entity, index);\r\n      } else {\r\n        this.entitiesToRemove.push(entity);\r\n      }\r\n    }\r\n  }\r\n\r\n  _releaseEntity(entity, index) {\r\n    this._entities.splice(index, 1);\r\n\r\n    if (this._entitiesByNames[entity.name]) {\r\n      delete this._entitiesByNames[entity.name];\r\n    }\r\n    if (this._entitiesById[entity.id]) {\r\n      delete this._entitiesById[entity.id];\r\n    }\r\n\r\n    entity._pool.release(entity);\r\n    this.world.onEntityChanged.forEach(callback => {\r\n      callback(this._entities);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove all entities from this manager\r\n   */\r\n  removeAllEntities() {\r\n    for (var i = this._entities.length - 1; i >= 0; i--) {\r\n      this.removeEntity(this._entities[i]);\r\n    }\r\n  }\r\n\r\n  processDeferredRemoval() {\r\n    if (!this.deferredRemovalEnabled) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < this.entitiesToRemove.length; i++) {\r\n      let entity = this.entitiesToRemove[i];\r\n      let index = this._entities.indexOf(entity);\r\n      this._releaseEntity(entity, index);\r\n    }\r\n    this.entitiesToRemove.length = 0;\r\n\r\n    for (let i = 0; i < this.entitiesWithComponentsToRemove.length; i++) {\r\n      let entity = this.entitiesWithComponentsToRemove[i];\r\n      while (entity._ComponentTypesToRemove.length > 0) {\r\n        let Component = entity._ComponentTypesToRemove.pop();\r\n\r\n        var component = entity._componentsToRemove[Component._typeId];\r\n        delete entity._componentsToRemove[Component._typeId];\r\n        component.dispose();\r\n        this.world.componentsManager.componentRemovedFromEntity(Component);\r\n\r\n        //this._entityRemoveComponentSync(entity, Component, index);\r\n      }\r\n    }\r\n\r\n    this.entitiesWithComponentsToRemove.length = 0;\r\n  }\r\n\r\n  /**\r\n   * Get a query based on a list of components\r\n   * @param {Array(Component)} Components List of components that will form the query\r\n   */\r\n  queryComponents(Components) {\r\n    return this._queryManager.getQuery(Components);\r\n  }\r\n\r\n  // EXTRAS\r\n\r\n  /**\r\n   * Return number of entities\r\n   */\r\n  count() {\r\n    return this._entities.length;\r\n  }\r\n\r\n  /**\r\n   * Return some stats\r\n   */\r\n  stats() {\r\n    var stats = {\r\n      numEntities: this._entities.length,\r\n      numQueries: Object.keys(this._queryManager._queries).length,\r\n      queries: this._queryManager.stats(),\r\n      numComponentPool: Object.keys(this.componentsManager._componentPool)\r\n        .length,\r\n      componentPool: {},\r\n      eventDispatcher: this.eventDispatcher.stats,\r\n    };\r\n\r\n    for (var ecsyComponentId in this.componentsManager._componentPool) {\r\n      var pool = this.componentsManager._componentPool[ecsyComponentId];\r\n      stats.componentPool[pool.T.getName()] = {\r\n        used: pool.totalUsed(),\r\n        size: pool.count,\r\n      };\r\n    }\r\n\r\n    return stats;\r\n  }\r\n}\r\n\r\nconst ENTITY_CREATED = \"EntityManager#ENTITY_CREATE\";\r\nconst ENTITY_REMOVED = \"EntityManager#ENTITY_REMOVED\";\r\nconst COMPONENT_ADDED = \"EntityManager#COMPONENT_ADDED\";\r\nconst COMPONENT_REMOVE = \"EntityManager#COMPONENT_REMOVE\";\r\n", "import { ObjectPool } from \"./ObjectPool.js\";\r\n\r\nexport class ComponentManager {\r\n  constructor() {\r\n    this.Components = [];\r\n    this._ComponentsMap = {};\r\n\r\n    this._componentPool = {};\r\n    this.numComponents = {};\r\n    this.nextComponentId = 0;\r\n  }\r\n\r\n  hasComponent(Component) {\r\n    return this.Components.indexOf(Component) !== -1;\r\n  }\r\n\r\n  registerComponent(Component, objectPool) {\r\n    if (this.Components.indexOf(Component) !== -1) {\r\n      console.warn(\r\n        `Component type: '${Component.getName()}' already registered.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const schema = Component.schema;\r\n\r\n    if (!schema) {\r\n      throw new Error(\r\n        `Component \"${Component.getName()}\" has no schema property.`\r\n      );\r\n    }\r\n\r\n    for (const propName in schema) {\r\n      const prop = schema[propName];\r\n\r\n      if (!prop.type) {\r\n        throw new Error(\r\n          `Invalid schema for component \"${Component.getName()}\". Missing type for \"${propName}\" property.`\r\n        );\r\n      }\r\n    }\r\n\r\n    Component._typeId = this.nextComponentId++;\r\n    this.Components.push(Component);\r\n    this._ComponentsMap[Component._typeId] = Component;\r\n    this.numComponents[Component._typeId] = 0;\r\n\r\n    if (objectPool === undefined) {\r\n      objectPool = new ObjectPool(Component);\r\n    } else if (objectPool === false) {\r\n      objectPool = undefined;\r\n    }\r\n\r\n    this._componentPool[Component._typeId] = objectPool;\r\n  }\r\n\r\n  componentAddedToEntity(Component) {\r\n    this.numComponents[Component._typeId]++;\r\n  }\r\n\r\n  componentRemovedFromEntity(Component) {\r\n    this.numComponents[Component._typeId]--;\r\n  }\r\n\r\n  getComponentsPool(Component) {\r\n    return this._componentPool[Component._typeId];\r\n  }\r\n}\r\n", "export const Version = \"0.3.1\";\r\n", "const proxyMap = new WeakMap();\r\n\r\nconst proxyHandler = {\r\n  set(target, prop) {\r\n    throw new Error(\r\n      `Tried to write to \"${target.constructor.getName()}#${String(\r\n        prop\r\n      )}\" on immutable component. Use .getMutableComponent() to modify a component.`\r\n    );\r\n  },\r\n};\r\n\r\nexport default function wrapImmutableComponent(T, component) {\r\n  if (component === undefined) {\r\n    return undefined;\r\n  }\r\n\r\n  let wrappedComponent = proxyMap.get(component);\r\n\r\n  if (!wrappedComponent) {\r\n    wrappedComponent = new Proxy(component, proxyHandler);\r\n    proxyMap.set(component, wrappedComponent);\r\n  }\r\n\r\n  return wrappedComponent;\r\n}\r\n", "import Query from \"./Query.js\";\r\nimport wrapImmutableComponent from \"./WrapImmutableComponent.js\";\r\nimport { COMPONENT_CHANGE_EVENT } from \"./Component.js\";\r\n\r\nexport class Entity {\r\n  constructor(entityManager) {\r\n    this._entityManager = entityManager || null;\r\n\r\n    // Unique ID for this entity\r\n    do {\r\n      this.id = entityManager._nextEntityId++;\r\n    } while (entityManager.idExists(this.id));\r\n    this.name = \"\";\r\n\r\n    // List of components types the entity has\r\n    this._ComponentTypes = [];\r\n\r\n    // Instance of the components\r\n    this._components = {};\r\n\r\n    this._componentsToRemove = {};\r\n\r\n    // Queries where the entity is added\r\n    this.queries = [];\r\n\r\n    // Used for deferred removal\r\n    this._ComponentTypesToRemove = [];\r\n\r\n    this.alive = false;\r\n\r\n    //if there are state components on a entity, it can't be removed completely\r\n    this.numStateComponents = 0;\r\n  }\r\n\r\n  // COMPONENTS\r\n\r\n  getComponent(Component, includeRemoved) {\r\n    var component = this._components[Component._typeId];\r\n\r\n    if (!component && includeRemoved === true) {\r\n      component = this._componentsToRemove[Component._typeId];\r\n    }\r\n\r\n    return process.env.NODE_ENV !== \"production\"\r\n      ? wrapImmutableComponent(Component, component)\r\n      : component;\r\n  }\r\n\r\n  getRemovedComponent(Component) {\r\n    const component = this._componentsToRemove[Component._typeId];\r\n\r\n    return process.env.NODE_ENV !== \"production\"\r\n      ? wrapImmutableComponent(Component, component)\r\n      : component;\r\n  }\r\n\r\n  getComponents() {\r\n    return this._components;\r\n  }\r\n\r\n  getComponentsToRemove() {\r\n    return this._componentsToRemove;\r\n  }\r\n\r\n  getComponentTypes() {\r\n    return this._ComponentTypes;\r\n  }\r\n\r\n  getMutableComponent(Component) {\r\n    var component = this._components[Component._typeId];\r\n\r\n    if (!component) {\r\n      return;\r\n    }\r\n\r\n    for (var i = 0; i < this.queries.length; i++) {\r\n      var query = this.queries[i];\r\n      // @todo accelerate this check. Maybe having query._Components as an object\r\n      // @todo add Not components\r\n      if (query.reactive && query.Components.indexOf(Component) !== -1) {\r\n        query.eventDispatcher.dispatchEvent(\r\n          Query.prototype.COMPONENT_CHANGED,\r\n          this,\r\n          component\r\n        );\r\n      }\r\n    }\r\n\r\n    // Call component changed callback.\r\n    component.eventEmitter.emit(COMPONENT_CHANGE_EVENT, component);\r\n\r\n    return component;\r\n  }\r\n\r\n  addComponent(Component, values) {\r\n    this._entityManager.entityAddComponent(this, Component, values);\r\n    return this;\r\n  }\r\n\r\n  removeComponent(Component, forceImmediate) {\r\n    this._entityManager.entityRemoveComponent(this, Component, forceImmediate);\r\n    return this;\r\n  }\r\n\r\n  hasComponent(Component, includeRemoved) {\r\n    return (\r\n      !!~this._ComponentTypes.indexOf(Component) ||\r\n      (includeRemoved === true && this.hasRemovedComponent(Component))\r\n    );\r\n  }\r\n\r\n  hasRemovedComponent(Component) {\r\n    return !!~this._ComponentTypesToRemove.indexOf(Component);\r\n  }\r\n\r\n  hasAllComponents(Components) {\r\n    for (var i = 0; i < Components.length; i++) {\r\n      if (!this.hasComponent(Components[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  hasAnyComponents(Components) {\r\n    for (var i = 0; i < Components.length; i++) {\r\n      if (this.hasComponent(Components[i])) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  removeAllComponents(forceImmediate) {\r\n    return this._entityManager.entityRemoveAllComponents(this, forceImmediate);\r\n  }\r\n\r\n  copy(src) {\r\n    // TODO: This can definitely be optimized\r\n    for (var ecsyComponentId in src._components) {\r\n      var srcComponent = src._components[ecsyComponentId];\r\n      this.addComponent(srcComponent.constructor);\r\n      var component = this.getComponent(srcComponent.constructor);\r\n      component.copy(srcComponent);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  clone() {\r\n    return new Entity(this._entityManager).copy(this);\r\n  }\r\n\r\n  reset() {\r\n    this.id = this._entityManager._nextEntityId++;\r\n    this._ComponentTypes.length = 0;\r\n    this.queries.length = 0;\r\n\r\n    for (var ecsyComponentId in this._components) {\r\n      delete this._components[ecsyComponentId];\r\n    }\r\n  }\r\n\r\n  remove(forceImmediate) {\r\n    return this._entityManager.removeEntity(this, forceImmediate);\r\n  }\r\n}\r\n", "import { SystemManager } from \"./SystemManager.js\";\r\nimport { EntityManager } from \"./EntityManager.js\";\r\nimport { ComponentManager } from \"./ComponentManager.js\";\r\nimport { Version } from \"./Version.js\";\r\nimport { hasWindow, now } from \"./Utils.js\";\r\nimport { Entity } from \"./Entity.js\";\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  entityPoolSize: 0,\r\n  entityClass: Entity,\r\n};\r\n\r\nexport class World {\r\n  constructor(options = {}) {\r\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\r\n\r\n    this.componentsManager = new ComponentManager(this);\r\n    this.entityManager = new EntityManager(this);\r\n    this.systemManager = new SystemManager(this);\r\n\r\n    // Entity change callbacks.\r\n    this.onEntityChanged = [];\r\n\r\n    this.enabled = true;\r\n\r\n    this.eventQueues = {};\r\n\r\n    if (hasWindow && typeof CustomEvent !== \"undefined\") {\r\n      var event = new CustomEvent(\"ecsy-world-created\", {\r\n        detail: { world: this, version: Version },\r\n      });\r\n      window.dispatchEvent(event);\r\n    }\r\n\r\n    this.lastTime = now() / 1000;\r\n  }\r\n\r\n  registerComponent(Component, objectPool) {\r\n    this.componentsManager.registerComponent(Component, objectPool);\r\n    return this;\r\n  }\r\n\r\n  registerSystem(System, attributes) {\r\n    this.systemManager.registerSystem(System, attributes);\r\n    return this;\r\n  }\r\n\r\n  hasRegisteredComponent(Component) {\r\n    return this.componentsManager.hasComponent(Component);\r\n  }\r\n\r\n  unregisterSystem(System) {\r\n    this.systemManager.unregisterSystem(System);\r\n    return this;\r\n  }\r\n\r\n  getSystem(SystemClass) {\r\n    return this.systemManager.getSystem(SystemClass);\r\n  }\r\n\r\n  getSystems() {\r\n    return this.systemManager.getSystems();\r\n  }\r\n\r\n  execute(delta, time) {\r\n    if (!delta) {\r\n      time = now() / 1000;\r\n      delta = time - this.lastTime;\r\n      this.lastTime = time;\r\n    }\r\n\r\n    if (this.enabled) {\r\n      this.systemManager.execute(delta, time);\r\n      this.entityManager.processDeferredRemoval();\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    this.enabled = false;\r\n  }\r\n\r\n  play() {\r\n    this.enabled = true;\r\n  }\r\n\r\n  createEntity(name, id) {\r\n    return this.entityManager.createEntity(name, id);\r\n  }\r\n\r\n  getAllEntities() {\r\n    return this.entityManager.getAllEntities();\r\n  }\r\n\r\n  getEntityByName(name) {\r\n    return this.entityManager.getEntityByName(name);\r\n  }\r\n\r\n  getEntityById(id) {\r\n    return this.entityManager.getEntityById(id);\r\n  }\r\n\r\n  stats() {\r\n    var stats = {\r\n      entities: this.entityManager.stats(),\r\n      system: this.systemManager.stats(),\r\n    };\r\n\r\n    return stats;\r\n  }\r\n}\r\n", "import { Component, ComponentConstructor } from \"ecsy/Component\";\r\n\r\nexport interface IComponent extends Component<IComponent> {}\r\n\r\n// Registry of all components\r\nexport namespace IComponent {\r\n  const implementations: ComponentConstructor<IComponent>[] = [];\r\n\r\n  export function getImplementations(): ComponentConstructor<IComponent>[] {\r\n    return implementations;\r\n  }\r\n\r\n  export function register<T extends ComponentConstructor<IComponent>>(\r\n    ctor: T\r\n  ) {\r\n    implementations.push(ctor);\r\n    return ctor;\r\n  }\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\n\r\nexport interface IEditorRenderContext {\r\n  mainCanvas: HTMLCanvasElement | null;\r\n  mainCamera: Entity | null;\r\n}\r\n\r\nexport const coreRenderContext: IEditorRenderContext = {\r\n  mainCanvas: null,\r\n  mainCamera: null,\r\n};\r\n", "import { mainWorld } from \".\";\r\n\r\nimport { IComponent } from \"./ComponentRegistry\";\r\nimport { coreRenderContext } from \"./Context/RenderContext\";\r\nimport { ISystemContext } from \"./Context/SystemContext\";\r\n\r\nexport const coreSetup = () => {\r\n  if (!coreRenderContext.mainCanvas) {\r\n    throw new Error(\"Main canvas is not ready.\");\r\n  }\r\n\r\n  // Register all components.\r\n  let componentConstructors = IComponent.getImplementations();\r\n  for (let i = 0; i < componentConstructors.length; i++) {\r\n    mainWorld.registerComponent(componentConstructors[i]);\r\n  }\r\n\r\n  // Call core setup callback.\r\n  systemContext.coreSetup();\r\n};\r\n\r\nexport const systemContext: ISystemContext = {\r\n  coreSetup: () => {},\r\n  coreStart: async () => {},\r\n  editorStart: () => {},\r\n};\r\n", "import { World } from \"ecsy/World\";\r\nimport { ITimeContext } from \"./Context/TimeContext\";\r\nimport { coreSetup, systemContext } from \"./CoreSetup\";\r\n\r\n// Main world to hold all game entities.\r\nexport let mainWorld = new World();\r\n// Physics world to hold all physics entities.\r\nexport let physicsWorld = new World();\r\n\r\n// Time context.\r\nexport const timeContext: ITimeContext = {\r\n  startTime: 0,\r\n  currentTime: 0,\r\n  deltaTime: 0,\r\n  timeScale: 1,\r\n  fixedTimeStep: 1 / 120,\r\n};\r\n\r\n// Frame update.\r\nconst mainUpdate = () => {\r\n  // Update time context.\r\n  let currentTime = Date.now() / 1000;\r\n  timeContext.deltaTime =\r\n    (currentTime - timeContext.currentTime) * timeContext.timeScale;\r\n  timeContext.currentTime = currentTime;\r\n\r\n  mainWorld.execute(timeContext.deltaTime);\r\n  requestAnimationFrame(mainUpdate);\r\n};\r\n\r\n// Physics update.\r\nconst physicsUpdate = async () => {\r\n  while (true) {\r\n    physicsWorld.execute(timeContext.fixedTimeStep);\r\n\r\n    // Wait for fixed time step.\r\n    await new Promise((resolve) =>\r\n      setTimeout(resolve, timeContext.fixedTimeStep * 1000)\r\n    );\r\n  }\r\n};\r\n\r\nexport const releaseInit = async () => {\r\n  // Setup core.\r\n  coreSetup();\r\n\r\n  await systemContext.coreStart({});\r\n\r\n  // Start white dwarf.\r\n  mainInit();\r\n};\r\n\r\nexport const mainInit = () => {\r\n  // Initialize time context.\r\n  timeContext.startTime = Date.now() / 1000;\r\n  timeContext.currentTime = timeContext.startTime;\r\n  timeContext.deltaTime = 0;\r\n\r\n  // Request animation frame.\r\n  requestAnimationFrame(mainUpdate);\r\n\r\n  // Start async physics update.\r\n  physicsUpdate();\r\n};\r\n\r\nexport const resetWorld = () => {\r\n  mainWorld = new World();\r\n  physicsWorld = new World();\r\n};\r\n", "export const copyValue = (src) => src;\r\n\r\nexport const cloneValue = (src) => src;\r\n\r\nexport const copyArray = (src, dest) => {\r\n  if (!src) {\r\n    return src;\r\n  }\r\n\r\n  if (!dest) {\r\n    return src.slice();\r\n  }\r\n\r\n  dest.length = 0;\r\n\r\n  for (let i = 0; i < src.length; i++) {\r\n    dest.push(src[i]);\r\n  }\r\n\r\n  return dest;\r\n};\r\n\r\nexport const cloneArray = (src) => src && src.slice();\r\n\r\nexport const copyJSON = (src) => JSON.parse(JSON.stringify(src));\r\n\r\nexport const cloneJSON = (src) => JSON.parse(JSON.stringify(src));\r\n\r\nexport const copyCopyable = (src, dest) => {\r\n  if (!src) {\r\n    return src;\r\n  }\r\n\r\n  if (!dest) {\r\n    return src.clone();\r\n  }\r\n\r\n  return dest.copy(src);\r\n};\r\n\r\nexport const cloneClonable = (src) => src && src.clone();\r\n\r\nexport function createType(typeDefinition) {\r\n  var mandatoryProperties = [\"name\", \"default\", \"copy\", \"clone\"];\r\n\r\n  var undefinedProperties = mandatoryProperties.filter((p) => {\r\n    return !typeDefinition.hasOwnProperty(p);\r\n  });\r\n\r\n  if (undefinedProperties.length > 0) {\r\n    throw new Error(\r\n      `createType expects a type definition with the following properties: ${undefinedProperties.join(\r\n        \", \"\r\n      )}`\r\n    );\r\n  }\r\n\r\n  typeDefinition.isType = true;\r\n\r\n  return typeDefinition;\r\n}\r\n\r\n/**\r\n * Standard types\r\n */\r\nexport const Types = {\r\n  Number: createType({\r\n    name: \"Number\",\r\n    default: 0,\r\n    copy: copyValue,\r\n    clone: cloneValue,\r\n  }),\r\n\r\n  Boolean: createType({\r\n    name: \"Boolean\",\r\n    default: false,\r\n    copy: copyValue,\r\n    clone: cloneValue,\r\n  }),\r\n\r\n  String: createType({\r\n    name: \"String\",\r\n    default: \"\",\r\n    copy: copyValue,\r\n    clone: cloneValue,\r\n  }),\r\n\r\n  Array: createType({\r\n    name: \"Array\",\r\n    default: [],\r\n    copy: copyArray,\r\n    clone: cloneArray,\r\n  }),\r\n\r\n  Ref: createType({\r\n    name: \"Ref\",\r\n    default: undefined,\r\n    copy: copyValue,\r\n    clone: cloneValue,\r\n  }),\r\n\r\n  JSON: createType({\r\n    name: \"JSON\",\r\n    default: null,\r\n    copy: copyJSON,\r\n    clone: cloneJSON,\r\n  }),\r\n};\r\n", "/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};", "import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();", "import { createType, copyCopyable, cloneClonable } from \"ecsy/Types\";\r\nimport { quat, vec4 } from \"gl-matrix\";\r\n\r\nexport class Quaternion {\r\n  value: quat;\r\n\r\n  constructor(x: number, y: number, z: number, w: number) {\r\n    this.value = quat.fromValues(x, y, z, w);\r\n  }\r\n\r\n  set(x: number, y: number, z: number, w: number) {\r\n    quat.set(this.value, x, y, z, w);\r\n  }\r\n\r\n  copy(q: Quaternion): Quaternion {\r\n    this.value = quat.copy(this.value, q.value);\r\n    return this;\r\n  }\r\n\r\n  clone(): Quaternion {\r\n    return new Quaternion(\r\n      this.value[0],\r\n      this.value[1],\r\n      this.value[2],\r\n      this.value[3]\r\n    );\r\n  }\r\n}\r\n\r\nexport const QuaternionType = createType({\r\n  name: \"Quaternion\",\r\n  default: new Quaternion(0, 0, 0, 1),\r\n  copy: copyCopyable<Quaternion>,\r\n  clone: cloneClonable<Quaternion>,\r\n});\r\n\r\nexport const QuaternionCustomEditor = (\r\n  value: Quaternion,\r\n  onChange: (value: Quaternion) => void\r\n): [HTMLDivElement, (v: Quaternion) => void] => {\r\n  const quaternionDiv = document.createElement(\"div\");\r\n  quaternionDiv.style.display = \"flex\";\r\n  quaternionDiv.style.flexDirection = \"row\";\r\n\r\n  const xLabel = document.createElement(\"label\");\r\n  xLabel.innerText = \"X\";\r\n  quaternionDiv.appendChild(xLabel);\r\n  const xInput = document.createElement(\"input\");\r\n  xInput.type = \"number\";\r\n  xInput.style.minWidth = \"0px\";\r\n  xInput.style.flexGrow = \"1\";\r\n  xInput.value = value.value[0].toString();\r\n  quaternionDiv.appendChild(xInput);\r\n\r\n  const yLabel = document.createElement(\"label\");\r\n  yLabel.innerText = \"Y\";\r\n  quaternionDiv.appendChild(yLabel);\r\n  const yInput = document.createElement(\"input\");\r\n  yInput.type = \"number\";\r\n  yInput.style.minWidth = \"0px\";\r\n  yInput.style.flexGrow = \"1\";\r\n  yInput.value = value.value[1].toString();\r\n  quaternionDiv.appendChild(yInput);\r\n\r\n  const zLabel = document.createElement(\"label\");\r\n  zLabel.innerText = \"Z\";\r\n  quaternionDiv.appendChild(zLabel);\r\n  const zInput = document.createElement(\"input\");\r\n  zInput.type = \"number\";\r\n  zInput.style.minWidth = \"0px\";\r\n  zInput.style.flexGrow = \"1\";\r\n  zInput.value = value.value[2].toString();\r\n  quaternionDiv.appendChild(zInput);\r\n\r\n  const wLabel = document.createElement(\"label\");\r\n  wLabel.innerText = \"W\";\r\n  quaternionDiv.appendChild(wLabel);\r\n  const wInput = document.createElement(\"input\");\r\n  wInput.type = \"number\";\r\n  wInput.style.minWidth = \"0px\";\r\n  wInput.style.flexGrow = \"1\";\r\n  wInput.value = value.value[3].toString();\r\n  quaternionDiv.appendChild(wInput);\r\n\r\n  const update = () => {\r\n    onChange(\r\n      new Quaternion(\r\n        parseFloat(xInput.value),\r\n        parseFloat(yInput.value),\r\n        parseFloat(zInput.value),\r\n        parseFloat(wInput.value)\r\n      )\r\n    );\r\n  };\r\n\r\n  const setQuaternion = (q: Quaternion) => {\r\n    if (\r\n      document.activeElement === xInput ||\r\n      document.activeElement === yInput ||\r\n      document.activeElement === zInput ||\r\n      document.activeElement === wInput\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    xInput.value = q.value[0].toString();\r\n    yInput.value = q.value[1].toString();\r\n    zInput.value = q.value[2].toString();\r\n    wInput.value = q.value[3].toString();\r\n  };\r\n\r\n  xInput.addEventListener(\"change\", update);\r\n  yInput.addEventListener(\"change\", update);\r\n  zInput.addEventListener(\"change\", update);\r\n  wInput.addEventListener(\"change\", update);\r\n\r\n  return [quaternionDiv, setQuaternion];\r\n};\r\n", "import { createType, copyCopyable, cloneClonable } from \"ecsy/Types\";\r\nimport { vec3 } from \"gl-matrix\";\r\n\r\nexport class Vector3 {\r\n  value: vec3;\r\n\r\n  constructor(x: number, y: number, z: number) {\r\n    this.value = vec3.fromValues(x, y, z);\r\n  }\r\n\r\n  set(x: number, y: number, z: number) {\r\n    vec3.set(this.value, x, y, z);\r\n  }\r\n\r\n  copy(v: Vector3): Vector3 {\r\n    this.value = vec3.copy(this.value, v.value);\r\n    return this;\r\n  }\r\n\r\n  clone(): Vector3 {\r\n    return new Vector3(this.value[0], this.value[1], this.value[2]);\r\n  }\r\n}\r\n\r\nexport const Vector3Type = createType({\r\n  name: \"Vector3\",\r\n  default: new Vector3(0, 0, 0),\r\n  copy: copyCopyable<Vector3>,\r\n  clone: cloneClonable<Vector3>,\r\n});\r\n\r\nexport const Vector3CustomEditor = (\r\n  value: Vector3,\r\n  onChange: (value: Vector3) => void\r\n): [HTMLDivElement, (v: Vector3) => void] => {\r\n  const vector3Div = document.createElement(\"div\");\r\n  vector3Div.style.display = \"flex\";\r\n  vector3Div.style.flexDirection = \"row\";\r\n\r\n  const xLabel = document.createElement(\"label\");\r\n  xLabel.innerText = \"X\";\r\n  vector3Div.appendChild(xLabel);\r\n  const xInput = document.createElement(\"input\");\r\n  xInput.type = \"number\";\r\n  xInput.style.minWidth = \"0px\";\r\n  xInput.style.flexGrow = \"1\";\r\n  xInput.value = value.value[0].toString();\r\n  vector3Div.appendChild(xInput);\r\n\r\n  const yLabel = document.createElement(\"label\");\r\n  yLabel.innerText = \"Y\";\r\n  vector3Div.appendChild(yLabel);\r\n  const yInput = document.createElement(\"input\");\r\n  yInput.type = \"number\";\r\n  yInput.style.minWidth = \"0px\";\r\n  yInput.style.flexGrow = \"1\";\r\n  yInput.value = value.value[1].toString();\r\n  vector3Div.appendChild(yInput);\r\n\r\n  const zLabel = document.createElement(\"label\");\r\n  zLabel.innerText = \"Z\";\r\n  vector3Div.appendChild(zLabel);\r\n  const zInput = document.createElement(\"input\");\r\n  zInput.type = \"number\";\r\n  zInput.style.minWidth = \"0px\";\r\n  zInput.style.flexGrow = \"1\";\r\n  zInput.value = value.value[2].toString();\r\n  vector3Div.appendChild(zInput);\r\n\r\n  const update = () => {\r\n    onChange(\r\n      new Vector3(\r\n        parseFloat(xInput.value),\r\n        parseFloat(yInput.value),\r\n        parseFloat(zInput.value)\r\n      )\r\n    );\r\n  };\r\n\r\n  const setVector3 = (v: Vector3) => {\r\n    if (\r\n      document.activeElement === xInput ||\r\n      document.activeElement === yInput ||\r\n      document.activeElement === zInput\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    xInput.value = v.value[0].toString();\r\n    yInput.value = v.value[1].toString();\r\n    zInput.value = v.value[2].toString();\r\n  };\r\n\r\n  xInput.addEventListener(\"change\", update);\r\n  yInput.addEventListener(\"change\", update);\r\n  zInput.addEventListener(\"change\", update);\r\n\r\n  return [vector3Div, setVector3];\r\n};\r\n", "import {\r\n  Component,\r\n  ComponentSchema,\r\n  COMPONENT_CHANGE_EVENT,\r\n} from \"ecsy/Component\";\r\nimport {\r\n  Quaternion,\r\n  QuaternionCustomEditor,\r\n  QuaternionType,\r\n} from \"../../../Mathematics/Quaternion\";\r\nimport {\r\n  Vector3,\r\n  Vector3CustomEditor,\r\n  Vector3Type,\r\n} from \"../../../Mathematics/Vector3\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class TransformData3D extends Component<TransformData3D> {\r\n  static schema: ComponentSchema = {\r\n    position: {\r\n      type: Vector3Type,\r\n      default: new Vector3(0, 0, 0),\r\n    },\r\n    rotation: {\r\n      type: QuaternionType,\r\n      default: new Quaternion(0, 0, 0, 1),\r\n    },\r\n    scale: {\r\n      type: Vector3Type,\r\n      default: new Vector3(1, 1, 1),\r\n    },\r\n  };\r\n\r\n  position!: Vector3;\r\n  rotation!: Quaternion;\r\n  scale!: Vector3;\r\n\r\n  public useDefaultInspector: boolean = false;\r\n  public onInspector: (componentDiv: HTMLDivElement) => void | null = (\r\n    componentDiv: HTMLDivElement\r\n  ) => {\r\n    const transformDiv = document.createElement(\"div\");\r\n\r\n    // Position editor.\r\n    const positionDiv = document.createElement(\"div\");\r\n    // Position title.\r\n    positionDiv.appendChild(document.createTextNode(\"Position\"));\r\n    // Position Vector3 editor.\r\n    const [positionVector3Div, setPosition] = Vector3CustomEditor(\r\n      this.position,\r\n      (newValue) => {\r\n        this.position = newValue;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      }\r\n    );\r\n    positionDiv.appendChild(positionVector3Div);\r\n\r\n    // Rotation editor.\r\n    const rotationDiv = document.createElement(\"div\");\r\n    // Rotation title.\r\n    rotationDiv.appendChild(document.createTextNode(\"Rotation\"));\r\n    // Rotation Quaternion editor.\r\n    const [rotationQuaternionDiv, setRotation] = QuaternionCustomEditor(\r\n      this.rotation,\r\n      (newValue) => {\r\n        this.rotation = newValue;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      }\r\n    );\r\n    rotationDiv.appendChild(rotationQuaternionDiv);\r\n\r\n    // Scale editor.\r\n    const scaleDiv = document.createElement(\"div\");\r\n    // Scale title.\r\n    scaleDiv.appendChild(document.createTextNode(\"Scale\"));\r\n    // Scale Vector3 editor.\r\n    const [scaleVector3Div, setScale] = Vector3CustomEditor(\r\n      this.scale,\r\n      (newValue) => {\r\n        this.scale = newValue;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      }\r\n    );\r\n    scaleDiv.appendChild(scaleVector3Div);\r\n\r\n    // Append all editors to the transform editor.\r\n    transformDiv.appendChild(positionDiv);\r\n    transformDiv.appendChild(rotationDiv);\r\n    transformDiv.appendChild(scaleDiv);\r\n\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, () => {\r\n      setPosition(this.position);\r\n      setRotation(this.rotation);\r\n      setScale(this.scale);\r\n    });\r\n\r\n    // Append the transform editor to the component editor.\r\n    componentDiv.appendChild(transformDiv);\r\n  };\r\n}\r\n", "import Query from \"./Query.js\";\r\nimport { componentRegistered } from \"./Utils.js\";\r\n\r\nexport class System {\r\n  canExecute() {\r\n    if (this._mandatoryQueries.length === 0) return true;\r\n\r\n    for (let i = 0; i < this._mandatoryQueries.length; i++) {\r\n      var query = this._mandatoryQueries[i];\r\n      if (query.entities.length === 0) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  getName() {\r\n    return this.constructor.getName();\r\n  }\r\n\r\n  constructor(world, attributes) {\r\n    this.world = world;\r\n    this.enabled = true;\r\n\r\n    // @todo Better naming :)\r\n    this._queries = {};\r\n    this.queries = {};\r\n\r\n    this.priority = 0;\r\n\r\n    // Used for stats\r\n    this.executeTime = 0;\r\n\r\n    if (attributes && attributes.priority) {\r\n      this.priority = attributes.priority;\r\n    }\r\n\r\n    this._mandatoryQueries = [];\r\n\r\n    this.initialized = true;\r\n\r\n    if (this.constructor.queries) {\r\n      for (var queryName in this.constructor.queries) {\r\n        var queryConfig = this.constructor.queries[queryName];\r\n        var Components = queryConfig.components;\r\n        if (!Components || Components.length === 0) {\r\n          throw new Error(\"'components' attribute can't be empty in a query\");\r\n        }\r\n\r\n        // Detect if the components have already been registered\r\n        let unregisteredComponents = Components.filter(\r\n          (Component) => !componentRegistered(Component)\r\n        );\r\n\r\n        if (unregisteredComponents.length > 0) {\r\n          throw new Error(\r\n            `Tried to create a query '${\r\n              this.constructor.name\r\n            }.${queryName}' with unregistered components: [${unregisteredComponents\r\n              .map((c) => c.getName())\r\n              .join(\", \")}]`\r\n          );\r\n        }\r\n\r\n        var query = this.world.entityManager.queryComponents(Components);\r\n\r\n        this._queries[queryName] = query;\r\n        if (queryConfig.mandatory === true) {\r\n          this._mandatoryQueries.push(query);\r\n        }\r\n        this.queries[queryName] = {\r\n          results: query.entities,\r\n        };\r\n\r\n        // Reactive configuration added/removed/changed\r\n        var validEvents = [\"added\", \"removed\", \"changed\"];\r\n\r\n        const eventMapping = {\r\n          added: Query.prototype.ENTITY_ADDED,\r\n          removed: Query.prototype.ENTITY_REMOVED,\r\n          changed: Query.prototype.COMPONENT_CHANGED, // Query.prototype.ENTITY_CHANGED\r\n        };\r\n\r\n        if (queryConfig.listen) {\r\n          validEvents.forEach((eventName) => {\r\n            if (!this.execute) {\r\n              console.warn(\r\n                `System '${this.getName()}' has defined listen events (${validEvents.join(\r\n                  \", \"\r\n                )}) for query '${queryName}' but it does not implement the 'execute' method.`\r\n              );\r\n            }\r\n\r\n            // Is the event enabled on this system's query?\r\n            if (queryConfig.listen[eventName]) {\r\n              let event = queryConfig.listen[eventName];\r\n\r\n              if (eventName === \"changed\") {\r\n                query.reactive = true;\r\n                if (event === true) {\r\n                  // Any change on the entity from the components in the query\r\n                  let eventList = (this.queries[queryName][eventName] = []);\r\n                  query.eventDispatcher.addEventListener(\r\n                    Query.prototype.COMPONENT_CHANGED,\r\n                    (entity) => {\r\n                      // Avoid duplicates\r\n                      if (eventList.indexOf(entity) === -1) {\r\n                        eventList.push(entity);\r\n                      }\r\n                    }\r\n                  );\r\n                } else if (Array.isArray(event)) {\r\n                  let eventList = (this.queries[queryName][eventName] = []);\r\n                  query.eventDispatcher.addEventListener(\r\n                    Query.prototype.COMPONENT_CHANGED,\r\n                    (entity, changedComponent) => {\r\n                      // Avoid duplicates\r\n                      if (\r\n                        event.indexOf(changedComponent.constructor) !== -1 &&\r\n                        eventList.indexOf(entity) === -1\r\n                      ) {\r\n                        eventList.push(entity);\r\n                      }\r\n                    }\r\n                  );\r\n                } else {\r\n                  /*\r\n                  // Checking just specific components\r\n                  let changedList = (this.queries[queryName][eventName] = {});\r\n                  event.forEach(component => {\r\n                    let eventList = (changedList[\r\n                      componentPropertyName(component)\r\n                    ] = []);\r\n                    query.eventDispatcher.addEventListener(\r\n                      Query.prototype.COMPONENT_CHANGED,\r\n                      (entity, changedComponent) => {\r\n                        if (\r\n                          changedComponent.constructor === component &&\r\n                          eventList.indexOf(entity) === -1\r\n                        ) {\r\n                          eventList.push(entity);\r\n                        }\r\n                      }\r\n                    );\r\n                  });\r\n                  */\r\n                }\r\n              } else {\r\n                let eventList = (this.queries[queryName][eventName] = []);\r\n\r\n                query.eventDispatcher.addEventListener(\r\n                  eventMapping[eventName],\r\n                  (entity) => {\r\n                    // @fixme overhead?\r\n                    if (eventList.indexOf(entity) === -1)\r\n                      eventList.push(entity);\r\n                  }\r\n                );\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  stop() {\r\n    this.executeTime = 0;\r\n    this.enabled = false;\r\n  }\r\n\r\n  play() {\r\n    this.enabled = true;\r\n  }\r\n\r\n  // @question rename to clear queues?\r\n  clearEvents() {\r\n    for (let queryName in this.queries) {\r\n      var query = this.queries[queryName];\r\n      if (query.added) {\r\n        query.added.length = 0;\r\n      }\r\n      if (query.removed) {\r\n        query.removed.length = 0;\r\n      }\r\n      if (query.changed) {\r\n        if (Array.isArray(query.changed)) {\r\n          query.changed.length = 0;\r\n        } else {\r\n          for (let name in query.changed) {\r\n            query.changed[name].length = 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  toJSON() {\r\n    var json = {\r\n      name: this.getName(),\r\n      enabled: this.enabled,\r\n      executeTime: this.executeTime,\r\n      priority: this.priority,\r\n      queries: {},\r\n    };\r\n\r\n    if (this.constructor.queries) {\r\n      var queries = this.constructor.queries;\r\n      for (let queryName in queries) {\r\n        let query = this.queries[queryName];\r\n        let queryDefinition = queries[queryName];\r\n        let jsonQuery = (json.queries[queryName] = {\r\n          key: this._queries[queryName].key,\r\n        });\r\n\r\n        jsonQuery.mandatory = queryDefinition.mandatory === true;\r\n        jsonQuery.reactive =\r\n          queryDefinition.listen &&\r\n          (queryDefinition.listen.added === true ||\r\n            queryDefinition.listen.removed === true ||\r\n            queryDefinition.listen.changed === true ||\r\n            Array.isArray(queryDefinition.listen.changed));\r\n\r\n        if (jsonQuery.reactive) {\r\n          jsonQuery.listen = {};\r\n\r\n          const methods = [\"added\", \"removed\", \"changed\"];\r\n          methods.forEach((method) => {\r\n            if (query[method]) {\r\n              jsonQuery.listen[method] = {\r\n                entities: query[method].length,\r\n              };\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return json;\r\n  }\r\n}\r\n\r\nSystem.isSystem = true;\r\nSystem.getName = function () {\r\n  return this.displayName || this.name;\r\n};\r\n\r\nexport function Not(Component) {\r\n  return {\r\n    operator: \"not\",\r\n    Component: Component,\r\n  };\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Vector3, Vector3Type } from \"../../../Mathematics/Vector3\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class EulerVelocityData3D extends Component<EulerVelocityData3D> {\r\n  static schema: ComponentSchema = {\r\n    velocity: {\r\n      type: Vector3Type,\r\n      default: new Vector3(0, 0, 0),\r\n    },\r\n  };\r\n\r\n  velocity!: Vector3;\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class MassData extends Component<MassData> {\r\n  static schema: ComponentSchema = {\r\n    mass: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n  };\r\n\r\n  mass!: number;\r\n}\r\n", "import { System, SystemQueries } from \"ecsy/System\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { EulerVelocityData3D } from \"../DataComponents/EulerVelocityData3D\";\r\nimport { MassData } from \"../DataComponents/MassData\";\r\n\r\nconst GRAVITY_ACCELERATION = 9.8;\r\nexport class EulerVelocityGravitySystem extends System {\r\n  static queries: SystemQueries = {\r\n    gravityTargets: {\r\n      components: [EulerVelocityData3D, MassData],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    this.queries.gravityTargets.results.forEach((target) => {\r\n      // Get the mutable velocity component.\r\n      const velocity = target.getMutableComponent(\r\n        EulerVelocityData3D\r\n      ) as EulerVelocityData3D;\r\n\r\n      // Change velocity.\r\n      let acceleration = vec3.fromValues(0, -GRAVITY_ACCELERATION, 0);\r\n      vec3.scale(acceleration, acceleration, delta);\r\n      vec3.add(velocity.velocity.value, velocity.velocity.value, acceleration);\r\n    });\r\n  }\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\nimport { EulerVelocityData3D } from \"../DataComponents/EulerVelocityData3D\";\r\n\r\nexport class EulerVelocity3DMoveSystem extends System {\r\n  static queries: SystemQueries = {\r\n    moveTargets: {\r\n      components: [TransformData3D, EulerVelocityData3D],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Move all the components based on euler velocity.\r\n    this.queries.moveTargets.results.forEach((target) => {\r\n      // Get the euler velocity.\r\n      const eulerVelocity = target.getComponent(\r\n        EulerVelocityData3D\r\n      ) as EulerVelocityData3D;\r\n      // Get mutable transform data.\r\n      const transform = target.getMutableComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n\r\n      // Change the transform position.\r\n      const deltaD = vec3.create();\r\n      vec3.scale(deltaD, eulerVelocity.velocity.value, delta);\r\n      vec3.add(transform.position.value, transform.position.value, deltaD);\r\n    });\r\n  }\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Entity } from \"ecsy/Entity\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\nexport class Constraint {\r\n  target!: Entity;\r\n  length!: number;\r\n\r\n  constructor(target: Entity, length: number) {\r\n    this.target = target;\r\n    this.length = length;\r\n  }\r\n}\r\n\r\n@IComponent.register\r\nexport class ConstraintData extends Component<ConstraintData> {\r\n  static schema: ComponentSchema = {\r\n    constraints: {\r\n      type: Types.Ref,\r\n      default: [],\r\n    },\r\n  };\r\n  constraints!: Array<Constraint>;\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\nimport { ConstraintData } from \"../DataComponents/ConstraintData\";\r\n\r\nexport class JakobsenConstraintSystem extends System {\r\n  static queries: SystemQueries = {\r\n    constrainedEntities: {\r\n      components: [TransformData3D, ConstraintData],\r\n    },\r\n  };\r\n\r\n  jakobsenIterations: number = 1;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    if (attributes?.jakobsenIteration) {\r\n      this.jakobsenIterations = attributes.jakobsenIterations;\r\n    }\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // More iterations = more accurate, but slower.\r\n    for (let i = 0; i < this.jakobsenIterations; i++) {\r\n      this.queries.constrainedEntities.results.forEach((entity) => {\r\n        // Get mutable transform.\r\n        const transform = entity.getMutableComponent(\r\n          TransformData3D\r\n        ) as TransformData3D;\r\n\r\n        // Get constraints.\r\n        const constraints = entity.getComponent(\r\n          ConstraintData\r\n        ) as ConstraintData;\r\n\r\n        // Enforce each constraint.\r\n        constraints.constraints.forEach((constraint) => {\r\n          const targetEntity = constraint.target;\r\n          if (!targetEntity.hasComponent(TransformData3D)) {\r\n            return;\r\n          }\r\n          const targetTransform = targetEntity.getMutableComponent(\r\n            TransformData3D\r\n          ) as TransformData3D;\r\n\r\n          // Calculate the distance.\r\n          const distance = vec3.dist(\r\n            targetTransform.position.value,\r\n            transform.position.value\r\n          );\r\n          const deltaDistance = distance - constraint.length;\r\n\r\n          if (!targetEntity.hasComponent(ConstraintData)) {\r\n            // If the target constraint have no constraint data.\r\n            // Move current transform.\r\n            const movePos = vec3.sub(\r\n              vec3.create(),\r\n              targetTransform.position.value,\r\n              transform.position.value\r\n            );\r\n            vec3.normalize(movePos, movePos);\r\n            vec3.scale(movePos, movePos, deltaDistance);\r\n            vec3.add(\r\n              transform.position.value,\r\n              transform.position.value,\r\n              movePos\r\n            );\r\n          } else {\r\n            // Move current transform.\r\n            const movePos = vec3.sub(\r\n              vec3.create(),\r\n              targetTransform.position.value,\r\n              transform.position.value\r\n            );\r\n            vec3.normalize(movePos, movePos);\r\n            vec3.scale(movePos, movePos, deltaDistance / 2);\r\n            vec3.add(\r\n              transform.position.value,\r\n              transform.position.value,\r\n              movePos\r\n            );\r\n            // Move target transform.\r\n            vec3.negate(movePos, movePos);\r\n            vec3.add(\r\n              targetTransform.position.value,\r\n              targetTransform.position.value,\r\n              movePos\r\n            );\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\n\r\n@IComponent.register\r\nexport class SyncTransform3DData extends Component<SyncTransform3DData> {\r\n  static schema: ComponentSchema = {\r\n    targetTransform: {\r\n      type: Types.Ref,\r\n      default: null,\r\n    },\r\n  };\r\n\r\n  targetTransform!: TransformData3D;\r\n}\r\n", "import { COMPONENT_CHANGE_EVENT } from \"ecsy/Component\";\r\nimport { System, SystemQueries } from \"ecsy/System\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\nimport { SyncTransform3DData } from \"../DataComponents/SyncTransform3DData\";\r\n\r\nexport class Transform3DSyncSystem extends System {\r\n  static queries: SystemQueries = {\r\n    syncEntities: {\r\n      components: [TransformData3D, SyncTransform3DData],\r\n      listen: {\r\n        changed: true,\r\n        added: true,\r\n      },\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    this.queries.syncEntities.results.forEach((entity) => {\r\n      // Get sync data.\r\n      const syncData = entity.getComponent(\r\n        SyncTransform3DData\r\n      ) as SyncTransform3DData;\r\n      // Get transform data.\r\n      const transformData = entity.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n\r\n      // Sync data.\r\n      syncData.targetTransform.copy(transformData);\r\n      syncData.targetTransform.eventEmitter.emit(\r\n        COMPONENT_CHANGE_EVENT,\r\n        syncData.targetTransform\r\n      );\r\n    });\r\n  }\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Vector3, Vector3Type } from \"../../../Mathematics/Vector3\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class VerletVelocityData3D extends Component<VerletVelocityData3D> {\r\n  static schema: ComponentSchema = {\r\n    acceleration: {\r\n      type: Vector3Type,\r\n      default: new Vector3(0, 0, 0),\r\n    },\r\n    lastFramePosition: {\r\n      type: Vector3Type,\r\n      default: new Vector3(0, 0, 0),\r\n    },\r\n  };\r\n\r\n  acceleration!: Vector3;\r\n  lastFramePosition!: Vector3;\r\n}\r\n", "import { System, SystemQueries } from \"ecsy/System\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { MassData } from \"../DataComponents/MassData\";\r\nimport { VerletVelocityData3D } from \"../DataComponents/VerletVelocityData3D\";\r\n\r\nconst GRAVITY_ACCELERATION = 9.8;\r\nexport class VerletVelocity3DGravitySystem extends System {\r\n  static queries: SystemQueries = {\r\n    gravityTargets: {\r\n      components: [VerletVelocityData3D, MassData],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    this.queries.gravityTargets.results.forEach((target) => {\r\n      // Get verlet velocity mutable component.\r\n      const verletVelocity = target.getMutableComponent(\r\n        VerletVelocityData3D\r\n      ) as VerletVelocityData3D;\r\n\r\n      // Change the acceleration.\r\n      vec3.add(\r\n        verletVelocity.acceleration.value,\r\n        verletVelocity.acceleration.value,\r\n        vec3.fromValues(0, -GRAVITY_ACCELERATION, 0)\r\n      );\r\n    });\r\n  }\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\nimport { VerletVelocityData3D } from \"../DataComponents/VerletVelocityData3D\";\r\n\r\n/**\r\n * The system to move all the objects using verlet velocity.\r\n * This system must be called last.\r\n */\r\nexport class VerletVelocity3DMoveSystem extends System {\r\n  static queries: SystemQueries = {\r\n    moveInitTargets: {\r\n      components: [TransformData3D, VerletVelocityData3D],\r\n      listen: {\r\n        added: true,\r\n      },\r\n    },\r\n    moveTargets: {\r\n      components: [TransformData3D, VerletVelocityData3D],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Init all verlet velocity data.\r\n    this.queries.moveInitTargets.added?.forEach((target) => {\r\n      // Get transform data.\r\n      let transform = target.getComponent(TransformData3D) as TransformData3D;\r\n\r\n      // Get verlet velocity data.\r\n      let verletVelocity = target.getMutableComponent(\r\n        VerletVelocityData3D\r\n      ) as VerletVelocityData3D;\r\n\r\n      // Init verlet position record.\r\n      verletVelocity.lastFramePosition = transform.position.clone();\r\n    });\r\n\r\n    // Move all the objects.\r\n    this.queries.moveTargets.results.forEach((target) => {\r\n      // Get transform data.\r\n      let transform = target.getMutableComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      // Get verlet velocity data.\r\n      let verletVelocity = target.getMutableComponent(\r\n        VerletVelocityData3D\r\n      ) as VerletVelocityData3D;\r\n\r\n      // Calculate the new position.\r\n      const newPos = vec3.create();\r\n      vec3.scale(newPos, transform.position.value, 2);\r\n      vec3.sub(newPos, newPos, verletVelocity.lastFramePosition.value);\r\n      vec3.add(\r\n        newPos,\r\n        newPos,\r\n        vec3.scale(\r\n          vec3.create(),\r\n          verletVelocity.acceleration.value,\r\n          Math.pow(delta, 2)\r\n        )\r\n      );\r\n\r\n      // Update position.\r\n      verletVelocity.lastFramePosition.value = transform.position.value;\r\n      transform.position.value = newPos;\r\n\r\n      // Clear acceleration.\r\n      verletVelocity.acceleration.value = vec3.create();\r\n    });\r\n  }\r\n}\r\n", "import {\r\n  Component,\r\n  ComponentSchema,\r\n  COMPONENT_CHANGE_EVENT,\r\n} from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class PerspectiveCameraData3D extends Component<PerspectiveCameraData3D> {\r\n  static schema: ComponentSchema = {\r\n    fov: {\r\n      type: Types.Number,\r\n      default: Math.PI / 4,\r\n    },\r\n    aspect: {\r\n      type: Types.Number,\r\n      default: 1,\r\n    },\r\n    near: {\r\n      type: Types.Number,\r\n      default: 0.1,\r\n    },\r\n    far: {\r\n      type: Types.Number,\r\n      default: 1000,\r\n    },\r\n  };\r\n\r\n  // y field of view in radians.\r\n  fov!: number;\r\n  // Camera aspect ratio.\r\n  aspect!: number;\r\n  // Camera near plane distance.\r\n  near!: number;\r\n  // Camera far plane distance.\r\n  far!: number;\r\n\r\n  public useDefaultInspector: boolean = false;\r\n  public onInspector: (componentDiv: HTMLDivElement) => void | null = (\r\n    componentDiv: HTMLDivElement\r\n  ) => {\r\n    const fovDiv = document.createElement(\"div\");\r\n    fovDiv.style.display = \"flex\";\r\n    fovDiv.style.flexDirection = \"row\";\r\n\r\n    fovDiv.appendChild(document.createTextNode(\"fov: \"));\r\n    // FOV Slider.\r\n    const fovSlider = document.createElement(\"input\");\r\n    fovSlider.type = \"range\";\r\n    fovSlider.min = \"0\";\r\n    fovSlider.max = \"3.14\";\r\n    fovSlider.step = \"0.01\";\r\n    fovSlider.value = this.fov.toString();\r\n    fovSlider.style.flex = \"1\";\r\n    fovSlider.addEventListener(\"change\", (event) => {\r\n      this.fov = parseFloat(fovSlider.value);\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    });\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, () => {\r\n      // If the input is focused, don't update it.\r\n      if (document.activeElement !== fovSlider) {\r\n        fovSlider.value = this.fov.toString();\r\n      }\r\n    });\r\n    fovDiv.appendChild(fovSlider);\r\n\r\n    const aspectDiv = document.createElement(\"div\");\r\n    aspectDiv.style.display = \"flex\";\r\n    aspectDiv.style.flexDirection = \"row\";\r\n\r\n    aspectDiv.appendChild(document.createTextNode(\"aspect: \"));\r\n    const aspectInput = document.createElement(\"input\");\r\n    aspectInput.type = \"number\";\r\n    aspectInput.value = this.aspect.toString();\r\n    aspectInput.style.minWidth = \"0px\";\r\n    aspectInput.style.flex = \"1\";\r\n    aspectInput.addEventListener(\"change\", (event) => {\r\n      this.aspect = parseFloat(aspectInput.value);\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    });\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, () => {\r\n      // If the input is focused, don't update it.\r\n      if (document.activeElement !== aspectInput) {\r\n        aspectInput.value = this.aspect.toString();\r\n      }\r\n    });\r\n    aspectDiv.appendChild(aspectInput);\r\n\r\n    const nearDiv = document.createElement(\"div\");\r\n    nearDiv.style.display = \"flex\";\r\n    nearDiv.style.flexDirection = \"row\";\r\n\r\n    nearDiv.appendChild(document.createTextNode(\"near: \"));\r\n    const nearInput = document.createElement(\"input\");\r\n    nearInput.type = \"number\";\r\n    nearInput.value = this.near.toString();\r\n    nearInput.style.minWidth = \"0px\";\r\n    nearInput.style.flex = \"1\";\r\n    nearInput.addEventListener(\"change\", (event) => {\r\n      this.near = parseFloat(nearInput.value);\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    });\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, () => {\r\n      // If the input is focused, don't update it.\r\n      if (document.activeElement !== nearInput) {\r\n        nearInput.value = this.near.toString();\r\n      }\r\n    });\r\n    nearDiv.appendChild(nearInput);\r\n\r\n    const farDiv = document.createElement(\"div\");\r\n    farDiv.style.display = \"flex\";\r\n    farDiv.style.flexDirection = \"row\";\r\n\r\n    farDiv.appendChild(document.createTextNode(\"far: \"));\r\n    const farInput = document.createElement(\"input\");\r\n    farInput.type = \"number\";\r\n    farInput.value = this.far.toString();\r\n    farInput.style.minWidth = \"0px\";\r\n    farInput.style.flex = \"1\";\r\n    farInput.addEventListener(\"change\", (event) => {\r\n      this.far = parseFloat(farInput.value);\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    });\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, () => {\r\n      // If the input is focused, don't update it.\r\n      if (document.activeElement !== farInput) {\r\n        farInput.value = this.far.toString();\r\n      }\r\n    });\r\n    farDiv.appendChild(farInput);\r\n\r\n    componentDiv.appendChild(fovDiv);\r\n    componentDiv.appendChild(aspectDiv);\r\n    componentDiv.appendChild(nearDiv);\r\n    componentDiv.appendChild(farDiv);\r\n  };\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class OrthographicCameraData3D extends Component<OrthographicCameraData3D> {\r\n  static schema: ComponentSchema = {\r\n    left: {\r\n      type: Types.Number,\r\n      default: -1,\r\n    },\r\n    right: {\r\n      type: Types.Number,\r\n      default: 1,\r\n    },\r\n    top: {\r\n      type: Types.Number,\r\n      default: 1,\r\n    },\r\n    bottom: {\r\n      type: Types.Number,\r\n      default: -1,\r\n    },\r\n    near: {\r\n      type: Types.Number,\r\n      default: 0.1,\r\n    },\r\n    far: {\r\n      type: Types.Number,\r\n      default: 1000,\r\n    },\r\n  };\r\n\r\n  // Camera left plane distance.\r\n  left!: number;\r\n  // Camera right plane distance.\r\n  right!: number;\r\n  // Camera top plane distance.\r\n  top!: number;\r\n  // Camera bottom plane distance.\r\n  bottom!: number;\r\n  // Camera near plane distance.\r\n  near!: number;\r\n  // Camera far plane distance.\r\n  far!: number;\r\n}\r\n", "import { Component } from \"./Component.js\";\r\n\r\nexport class TagComponent extends Component {\r\n  constructor() {\r\n    super(false);\r\n  }\r\n}\r\n\r\nTagComponent.isTagComponent = true;\r\n", "import { TagComponent } from \"ecsy/TagComponent\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class MainCameraTag extends TagComponent {}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec2, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Locomotion/DataComponent/TransformData3D\";\r\nimport { OrthographicCameraData3D } from \"../DataComponent/OrthographicCameraData3D\";\r\nimport { PerspectiveCameraData3D } from \"../DataComponent/PerspectiveCameraData3D\";\r\nimport { MainCameraTag } from \"../TagComponent/MainCameraTag\";\r\n\r\nexport class Canvas3DRenderer extends System {\r\n  static queries: SystemQueries = {\r\n    perspectiveMainCamera: {\r\n      components: [MainCameraTag, PerspectiveCameraData3D, TransformData3D],\r\n    },\r\n    orthographicMainCamera: {\r\n      components: [MainCameraTag, OrthographicCameraData3D, TransformData3D],\r\n    },\r\n  };\r\n\r\n  mainCanvas!: HTMLCanvasElement;\r\n  canvasContext!: CanvasRenderingContext2D;\r\n\r\n  worldToCamera: mat4 = mat4.create();\r\n  cameraToScreen: mat4 = mat4.create();\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    this.mainCanvas = attributes?.mainCanvas;\r\n    this.canvasContext = this.mainCanvas.getContext(\r\n      \"2d\"\r\n    ) as CanvasRenderingContext2D;\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Check if main camera exists.\r\n    if (\r\n      this.queries.perspectiveMainCamera.results.length +\r\n        this.queries.orthographicMainCamera.results.length ===\r\n      0\r\n    ) {\r\n      throw new Error(\"Main camera not found.\");\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (\r\n      this.queries.perspectiveMainCamera.results.length +\r\n        this.queries.orthographicMainCamera.results.length >\r\n      1\r\n    ) {\r\n      throw new Error(\"More than one main camera found.\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Construct a transform matrix from world space to model space.\r\n   * @param camTransform the transform of the camera.\r\n   * @param camData the camera data.\r\n   * @returns the world to model matrix.\r\n   */\r\n  orthographicWorldToCamera(\r\n    camTransform: TransformData3D,\r\n    camData: OrthographicCameraData3D\r\n  ): mat4 {\r\n    // Construct world to camera matrix.\r\n    const worldToCamera = mat4.create();\r\n    mat4.invert(worldToCamera, this.objectToWorld(camTransform));\r\n    const orthographic = mat4.create();\r\n    mat4.ortho(\r\n      orthographic,\r\n      camData.left,\r\n      camData.right,\r\n      camData.bottom,\r\n      camData.top,\r\n      camData.near,\r\n      camData.far\r\n    );\r\n    mat4.multiply(worldToCamera, orthographic, worldToCamera);\r\n    return worldToCamera;\r\n  }\r\n\r\n  /**\r\n   * Construct a transform matrix from world space to camera space.\r\n   *\r\n   * @param camTransform the transform of the camera.\r\n   * @param camData the camera data.\r\n   * @returns the world to camera matrix.\r\n   */\r\n  perspectiveWorldToCamera(\r\n    camTransform: TransformData3D,\r\n    camData: PerspectiveCameraData3D\r\n  ): mat4 {\r\n    // Construct world to camera matrix.\r\n    const worldToCamera = mat4.create();\r\n    mat4.invert(worldToCamera, this.objectToWorld(camTransform));\r\n    const perspective = mat4.create();\r\n    mat4.perspective(\r\n      perspective,\r\n      camData.fov,\r\n      camData.aspect,\r\n      camData.near,\r\n      camData.far\r\n    );\r\n    mat4.multiply(worldToCamera, perspective, worldToCamera);\r\n    return worldToCamera;\r\n  }\r\n\r\n  /**\r\n   * Construct a transform matrix from model space to world space.\r\n   *\r\n   * @param transform the transform of the model.\r\n   * @returns the model to world matrix.\r\n   */\r\n  objectToWorld(transform: TransformData3D, dropScale: boolean = false): mat4 {\r\n    const objectToWorld = mat4.create();\r\n    if (dropScale) {\r\n      mat4.fromRotationTranslation(\r\n        objectToWorld,\r\n        transform.rotation.value,\r\n        transform.position.value\r\n      );\r\n    } else {\r\n      mat4.fromRotationTranslationScale(\r\n        objectToWorld,\r\n        transform.rotation.value,\r\n        transform.position.value,\r\n        transform.scale.value\r\n      );\r\n    }\r\n    return objectToWorld;\r\n  }\r\n\r\n  generateCameraToScreenMatrix() {\r\n    this.cameraToScreen = mat4.create();\r\n\r\n    mat4.fromTranslation(this.cameraToScreen, [\r\n      this.mainCanvas.width / 2,\r\n      this.mainCanvas.height / 2,\r\n      0,\r\n    ]);\r\n\r\n    mat4.scale(this.cameraToScreen, this.cameraToScreen, [\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height,\r\n      1,\r\n    ]);\r\n  }\r\n\r\n  generateWorldToCameraMatrix() {\r\n    // Get the canvas size.\r\n    const canvasSize = vec2.fromValues(\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height\r\n    );\r\n    // Get world to screen space matrix.\r\n    if (this.queries.perspectiveMainCamera.results.length > 0) {\r\n      // Perspective camera.\r\n      const camera = this.queries.perspectiveMainCamera.results[0];\r\n      const cameraTransform = camera.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      const cameraPerspective = camera.getMutableComponent(\r\n        PerspectiveCameraData3D\r\n      ) as PerspectiveCameraData3D;\r\n\r\n      // Change the aspect ratio.\r\n      cameraPerspective.aspect = canvasSize[0] / canvasSize[1];\r\n\r\n      this.worldToCamera = this.perspectiveWorldToCamera(\r\n        cameraTransform,\r\n        cameraPerspective\r\n      );\r\n    } else {\r\n      // TODO: Orthographic camera.\r\n    }\r\n  }\r\n\r\n  drawLine(\r\n    startPoint: vec3,\r\n    endPoint: vec3,\r\n    color: string,\r\n    lineWidth: number\r\n  ): void {\r\n    if (startPoint[2] > 1 && endPoint[2] > 1) {\r\n      this.canvasContext.strokeStyle = color;\r\n      this.canvasContext.lineWidth = lineWidth;\r\n      this.canvasContext.beginPath();\r\n      this.canvasContext.moveTo(startPoint[0], startPoint[1]);\r\n      this.canvasContext.lineTo(endPoint[0], endPoint[1]);\r\n      this.canvasContext.stroke();\r\n    }\r\n  }\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\nimport { SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../../Locomotion/DataComponent/TransformData3D\";\r\nimport { ConstraintData } from \"../../../Physics/DataComponents/ConstraintData\";\r\nimport { LineFrameRenderData3D } from \"../../DataComponent/LineFrameRenderData3D\";\r\nimport { Canvas3DRenderer } from \"../Canvas3DRenderer\";\r\n\r\nexport class Canvas3DConstraintRenderer extends Canvas3DRenderer {\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    constraintEntities: {\r\n      components: [TransformData3D, ConstraintData],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Generate world to screen matrix.\r\n    const worldToScreen = mat4.multiply(\r\n      mat4.create(),\r\n      this.cameraToScreen,\r\n      this.worldToCamera\r\n    );\r\n\r\n    // All the entities visited this frame.\r\n    const visited: Set<Entity> = new Set<Entity>();\r\n    this.queries.constraintEntities.results.forEach((entity) => {\r\n      const frontier: Array<Entity> = new Array<Entity>();\r\n      // Add the current entity to the frontier.\r\n      frontier.push(entity);\r\n      // DFS.\r\n      while (frontier.length > 0) {\r\n        let curr = frontier.pop() as Entity;\r\n        // If curr node is already visited, continue.\r\n        if (visited.has(curr)) {\r\n          continue;\r\n        }\r\n        visited.add(curr);\r\n        // Check if curr entity has constraint data.\r\n        const currTransform = curr.getComponent(\r\n          TransformData3D\r\n        ) as TransformData3D;\r\n\r\n        if (curr.hasComponent(ConstraintData)) {\r\n          // Traverse all constrains.\r\n          curr\r\n            .getComponent(ConstraintData)\r\n            ?.constraints.forEach((constraint) => {\r\n              // Add the constraint to the frontier.\r\n              frontier.push(constraint.target);\r\n              // Get constraint transform.\r\n              const constraintTransform = constraint.target.getComponent(\r\n                TransformData3D\r\n              ) as TransformData3D;\r\n\r\n              if (currTransform && constraintTransform) {\r\n                const startPos = vec3.transformMat4(\r\n                  vec3.create(),\r\n                  currTransform.position.value,\r\n                  worldToScreen\r\n                );\r\n                const endPos = vec3.transformMat4(\r\n                  vec3.create(),\r\n                  constraintTransform.position.value,\r\n                  worldToScreen\r\n                );\r\n\r\n                this.drawLine(startPos, endPos, \"black\", 1);\r\n              }\r\n            });\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n", "import { cloneClonable, copyCopyable, createType } from \"ecsy/Types\";\r\nimport { Vector3, Vector3CustomEditor } from \"./Vector3\";\r\n\r\nexport class LineFrame3DSegment {\r\n  public p0: Vector3;\r\n  public p1: Vector3;\r\n\r\n  constructor(p0: Vector3, p1: Vector3) {\r\n    this.p0 = p0;\r\n    this.p1 = p1;\r\n  }\r\n\r\n  set(p0: Vector3, p1: Vector3) {\r\n    this.p0 = p0;\r\n    this.p1 = p1;\r\n  }\r\n\r\n  copy(h: LineFrame3DSegment): LineFrame3DSegment {\r\n    this.p0 = h.p0.clone();\r\n    this.p1 = h.p1.clone();\r\n    return this;\r\n  }\r\n\r\n  clone(): LineFrame3DSegment {\r\n    return new LineFrame3DSegment(this.p0.clone(), this.p1.clone());\r\n  }\r\n}\r\n\r\nexport const LineFrame3DSegmentType = createType({\r\n  name: \"LineFrame3DSegment\",\r\n  default: new LineFrame3DSegment(new Vector3(0, 0, 0), new Vector3(0, 0, 0)),\r\n  copy: copyCopyable<LineFrame3DSegment>,\r\n  clone: cloneClonable<LineFrame3DSegment>,\r\n});\r\n\r\nexport const LineFrame3DSegmentEditor = (\r\n  segment: LineFrame3DSegment,\r\n  onChange: (segment: LineFrame3DSegment) => void\r\n): HTMLElement => {\r\n  const el = document.createElement(\"div\");\r\n  const p0 = document.createElement(\"div\");\r\n  const p1 = document.createElement(\"div\");\r\n  el.appendChild(p0);\r\n  el.appendChild(p1);\r\n  p0.innerText = \"p0\";\r\n  p1.innerText = \"p1\";\r\n  p0.appendChild(\r\n    Vector3CustomEditor(segment.p0, (v) => {\r\n      segment.p0 = v;\r\n      onChange(segment);\r\n    })[0]\r\n  );\r\n  p1.appendChild(\r\n    Vector3CustomEditor(segment.p1, (v) => {\r\n      segment.p1 = v;\r\n      onChange(segment);\r\n    })[0]\r\n  );\r\n  return el;\r\n};\r\n", "import {\r\n  Component,\r\n  ComponentSchema,\r\n  COMPONENT_CHANGE_EVENT,\r\n} from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport {\r\n  LineFrame3DSegment,\r\n  LineFrame3DSegmentEditor,\r\n} from \"../../../Mathematics/LineFrame3DSegment\";\r\nimport { Vector3 } from \"../../../Mathematics/Vector3\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class LineFrameRenderData3D extends Component<LineFrameRenderData3D> {\r\n  static schema: ComponentSchema = {\r\n    color: {\r\n      type: Types.String,\r\n      default: \"black\",\r\n    },\r\n    segments: {\r\n      type: Types.Array,\r\n      default: [],\r\n    },\r\n  };\r\n\r\n  public color: string = \"black\";\r\n  public segments: LineFrame3DSegment[] = [];\r\n\r\n  public useDefaultInspector = false;\r\n  public onInspector = (componentDiv: HTMLDivElement) => {\r\n    const colorDiv = document.createElement(\"div\");\r\n    colorDiv.style.display = \"flex\";\r\n    colorDiv.style.flexDirection = \"row\";\r\n\r\n    const colorLabel = document.createElement(\"label\");\r\n    colorLabel.appendChild(document.createTextNode(\"Color: \"));\r\n    colorDiv.appendChild(colorLabel);\r\n\r\n    const colorInput = document.createElement(\"input\");\r\n    colorInput.type = \"color\";\r\n    colorInput.value = this.color;\r\n    colorInput.style.flexGrow = \"1\";\r\n    colorInput.onchange = () => {\r\n      this.color = colorInput.value;\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    };\r\n    colorDiv.appendChild(colorInput);\r\n\r\n    componentDiv.appendChild(colorDiv);\r\n\r\n    const curveSegmentsDiv = document.createElement(\"div\");\r\n    curveSegmentsDiv.style.display = \"flex\";\r\n    curveSegmentsDiv.style.flexDirection = \"column\";\r\n\r\n    this.populateSegmentEditor(curveSegmentsDiv);\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, (component) => {\r\n      this.RepopulateCurveUI(curveSegmentsDiv);\r\n    });\r\n\r\n    componentDiv.appendChild(curveSegmentsDiv);\r\n\r\n    const addCurveSegmentButton = document.createElement(\"button\");\r\n    addCurveSegmentButton.innerText = \"Add Curve Segment\";\r\n    addCurveSegmentButton.onclick = () => {\r\n      this.segments.push(\r\n        new LineFrame3DSegment(new Vector3(0, 0, 0), new Vector3(0, 0, 0))\r\n      );\r\n\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    };\r\n    componentDiv.appendChild(addCurveSegmentButton);\r\n  };\r\n\r\n  private RepopulateCurveUI(curveSegmentsDiv: HTMLDivElement) {\r\n    curveSegmentsDiv.innerHTML = \"\";\r\n\r\n    // Populate segment editor.\r\n    this.populateSegmentEditor(curveSegmentsDiv);\r\n  }\r\n\r\n  private populateSegmentEditor(curveSegmentsDiv: HTMLDivElement) {\r\n    this.segments.forEach((segment, index) => {\r\n      // Segment div.\r\n      const segmentDiv = document.createElement(\"div\");\r\n      segmentDiv.style.display = \"flex\";\r\n      segmentDiv.style.flexDirection = \"column\";\r\n      segmentDiv.style.border = \"1px solid black\";\r\n\r\n      // Segment header.\r\n      segmentDiv.appendChild(document.createTextNode(`Segment ${index}`));\r\n\r\n      // Segment editor.\r\n      const segmentEditor = LineFrame3DSegmentEditor(segment, (value) => {\r\n        this.segments[index] = value;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      });\r\n      segmentDiv.appendChild(segmentEditor);\r\n\r\n      // Remove segment button.\r\n      const removeSegmentButton = document.createElement(\"button\");\r\n      removeSegmentButton.appendChild(document.createTextNode(\"Remove\"));\r\n      removeSegmentButton.onclick = () => {\r\n        this.segments.splice(index, 1);\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      };\r\n      segmentDiv.appendChild(removeSegmentButton);\r\n\r\n      // Add segment to curve.\r\n      curveSegmentsDiv.appendChild(segmentDiv);\r\n    });\r\n  }\r\n}\r\n", "import { System, SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec2, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../../Locomotion/DataComponent/TransformData3D\";\r\nimport { LineFrameRenderData3D } from \"../../DataComponent/LineFrameRenderData3D\";\r\nimport { PerspectiveCameraData3D } from \"../../DataComponent/PerspectiveCameraData3D\";\r\nimport { Canvas3DRenderer } from \"../Canvas3DRenderer\";\r\n\r\nexport class Canvas3DLineFrameRenderer extends Canvas3DRenderer {\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    lineEntities: {\r\n      components: [LineFrameRenderData3D, TransformData3D],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Draw all frame lines.\r\n    this.queries.lineEntities.results.forEach((entity) => {\r\n      // Get the transform and render data.\r\n      const transform = entity.getComponent(TransformData3D) as TransformData3D;\r\n      const renderData = entity.getComponent(\r\n        LineFrameRenderData3D\r\n      ) as LineFrameRenderData3D;\r\n\r\n      // Generate object to world matrix.\r\n      const objectToWorld = this.objectToWorld(transform);\r\n\r\n      renderData.segments.forEach((segment) => {\r\n        // Generate object to camera matrix.\r\n        const objectToScreen = mat4.create();\r\n        mat4.multiply(objectToScreen, this.worldToCamera, objectToWorld);\r\n        mat4.multiply(objectToScreen, this.cameraToScreen, objectToScreen);\r\n\r\n        // Generate screen space start point.\r\n        const startPoint = vec3.create();\r\n        vec3.transformMat4(startPoint, segment.p0.value, objectToScreen);\r\n\r\n        // Generate screen space end point.\r\n        const endPoint = vec3.create();\r\n        vec3.transformMat4(endPoint, segment.p1.value, objectToScreen);\r\n\r\n        // Draw the line.\r\n        this.drawLine(startPoint, endPoint, renderData.color, 1);\r\n      });\r\n    });\r\n  }\r\n}\r\n", "import { Attributes, System } from \"ecsy/System\";\r\n\r\nexport class ClearCanvasSystem extends System {\r\n  mainCanvas!: HTMLCanvasElement;\r\n  canvasContext!: CanvasRenderingContext2D;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    this.mainCanvas = attributes?.mainCanvas;\r\n    this.canvasContext = this.mainCanvas.getContext(\r\n      \"2d\"\r\n    ) as CanvasRenderingContext2D;\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    this.canvasContext.clearRect(\r\n      0,\r\n      0,\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height\r\n    );\r\n  }\r\n}\r\n", "import { World } from \"ecsy/World\";\r\nimport { IWorldRegister } from \"../../Utils/IWorldRegister\";\r\nimport { Canvas3DConstraintRenderer } from \"./System/BuildInRenderers/Canvas3DConstraintRenderer\";\r\nimport { Canvas3DLineFrameRenderer } from \"./System/BuildInRenderers/Canvas3DLineFrameRenderer\";\r\nimport { Canvas3DRenderer } from \"./System/Canvas3DRenderer\";\r\nimport { ClearCanvasSystem } from \"./System/ClearCanvasSystem\";\r\n\r\nexport class RenderSystem3DRegister {\r\n  mainCanvas: HTMLCanvasElement;\r\n\r\n  constructor(mainCanvas: HTMLCanvasElement) {\r\n    this.mainCanvas = mainCanvas;\r\n  }\r\n\r\n  register: IWorldRegister = (world: World) => {\r\n    world\r\n      .registerSystem(ClearCanvasSystem, {\r\n        mainCanvas: this.mainCanvas,\r\n        priority: -100,\r\n      })\r\n      .registerSystem(Canvas3DLineFrameRenderer, {\r\n        mainCanvas: this.mainCanvas,\r\n      })\r\n      .registerSystem(Canvas3DConstraintRenderer, {\r\n        mainCanvas: this.mainCanvas,\r\n      });\r\n  };\r\n}\r\n", "import { TagComponent } from \"ecsy/TagComponent\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class MainCameraInitTag extends TagComponent {}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { MainCameraInitTag } from \"../TagComponent/MainCameraInitTag\";\r\nimport { MainCameraTag } from \"../TagComponent/MainCameraTag\";\r\n\r\n/**\r\n * This system replace all MainCameraInitTag to MainCameraTag.\r\n */\r\nexport class MainCameraInitSystem extends System {\r\n  static queries: SystemQueries = {\r\n    mainCameraInitEntities: {\r\n      components: [MainCameraInitTag],\r\n      listen: {\r\n        added: true,\r\n      },\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    this.queries.mainCameraInitEntities.results.forEach((entity) => {\r\n      entity.removeComponent(MainCameraInitTag);\r\n      entity.addComponent(MainCameraTag);\r\n    });\r\n  }\r\n}\r\n", "import { TagComponent } from \"ecsy/TagComponent\";\r\nimport { IComponent } from \"../../Core/ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class EditorSceneCamTag extends TagComponent {}\r\n", "import { TagComponent } from \"ecsy/TagComponent\";\r\nimport { IComponent } from \"../../Core/ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class EditorSelectedTag extends TagComponent {}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Entity } from \"ecsy/Entity\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { World } from \"ecsy/World\";\r\nimport { EditorSelectedTag } from \"../../Editor/TagComponent/EditorSelectedTag\";\r\nimport { IComponent } from \"../ComponentRegistry\";\r\n\r\nexport interface IEntityObject {\r\n  name: string;\r\n  id: number;\r\n  components: { [key: string]: any };\r\n}\r\n\r\nexport interface IComponentObject {\r\n  type: string;\r\n  data: any;\r\n}\r\n\r\n/**\r\n * This is a helper class for serializing and deserializing entities.\r\n */\r\nexport class EntitySerializer {\r\n  // The current deserialized entity data.\r\n  public entityData: IEntityObject | null = null;\r\n\r\n  /**\r\n   * Serialize an entity to a JSON object.\r\n   *\r\n   * @param component The component to serialize.\r\n   * @returns json object representation of the component.\r\n   */\r\n  public static serializeComponent(\r\n    component: Component<any>\r\n  ): IComponentObject {\r\n    const componentObject: IComponentObject = {\r\n      type: component.constructor.name,\r\n      data: {},\r\n    };\r\n\r\n    const componentSchema = Object.getPrototypeOf(component).constructor\r\n      .schema as ComponentSchema;\r\n\r\n    const componentDataContent: { [key: string]: any } = {};\r\n    Object.keys(component).forEach((key) => {\r\n      if (\r\n        Object.keys(componentSchema).includes(key) &&\r\n        componentSchema[key].type !== Types.Ref\r\n      ) {\r\n        componentDataContent[key] = component[key as keyof typeof component];\r\n      }\r\n    });\r\n\r\n    componentObject.data = componentDataContent;\r\n\r\n    return componentObject;\r\n  }\r\n\r\n  /**\r\n   * Serialize an entity to a JSON object.\r\n   *\r\n   * @param entity The entity to serialize.\r\n   * @returns json object representation of the entity.\r\n   */\r\n  public static serializeEntity(entity: Entity): IEntityObject {\r\n    const entityObject: IEntityObject = {\r\n      name: entity.name,\r\n      id: entity.id,\r\n      components: {},\r\n    };\r\n\r\n    // Get all components of entity.\r\n    const components = entity.getComponents();\r\n    const componentIndices = Object.keys(components);\r\n\r\n    // Add components data.\r\n    for (let j = 0; j < componentIndices.length; j++) {\r\n      const componentIndex = componentIndices[j];\r\n      const component = components[componentIndex];\r\n\r\n      // Skip EditorSelectedTag.\r\n      if (component.constructor.name === EditorSelectedTag.name) {\r\n        continue;\r\n      }\r\n\r\n      const componentObject = EntitySerializer.serializeComponent(component);\r\n\r\n      entityObject.components[componentObject.type] = componentObject.data;\r\n    }\r\n\r\n    return entityObject;\r\n  }\r\n  /**\r\n   * Add new entity to world from entity data.\r\n   *\r\n   * @param entityData The entity data to add.\r\n   * @param reserveId Whether to reserve the id of the entity, defaults to false.\r\n   */\r\n  public static deserializeEntity(\r\n    world: World,\r\n    entityData: IEntityObject,\r\n    reserveId: boolean = false\r\n  ): Entity | null {\r\n    // Check if entity already exists.\r\n    const entity = world.getEntityById(entityData.id);\r\n    if (reserveId && entity && entity.alive) {\r\n      console.warn(\r\n        `Entity with id ${entityData.id} already exists. Skipping deserialization.`\r\n      );\r\n      return null;\r\n    }\r\n\r\n    // Create new entity.\r\n    let newEntity;\r\n    if (reserveId) {\r\n      newEntity = world.createEntity(entityData.name, entityData.id);\r\n    } else {\r\n      newEntity = world.createEntity(entityData.name);\r\n    }\r\n\r\n    // Add components.\r\n    for (const componentName in entityData.components) {\r\n      const componentData = entityData.components[componentName];\r\n      // Add component.\r\n      const componentList = IComponent.getImplementations();\r\n      // Get the component with the name.\r\n      let component = componentList.find(\r\n        (component) => component.name === componentName\r\n      );\r\n      if (component) {\r\n        // Add component to entity.\r\n        newEntity.addComponent(component, componentData);\r\n      } else {\r\n        console.error(\"Component not found.\");\r\n      }\r\n    }\r\n\r\n    return entity;\r\n  }\r\n}\r\n", "import { World } from \"ecsy/World\";\r\nimport { EditorSceneCamTag } from \"../../Editor/TagComponent/EditorSceneCamTag\";\r\nimport { EntitySerializer, IEntityObject } from \"./EntitySerializer\";\r\n\r\n// TODO: Add system serialization here.\r\nexport interface IWorldObject {\r\n  entities: IEntityObject[];\r\n}\r\n\r\n/**\r\n * This is a helper class for serializing and deserializing worlds.\r\n */\r\nexport class WorldSerializer {\r\n  /**\r\n   * Serialize a world to a JSON object.\r\n   *\r\n   * @param world The world to serialize.\r\n   * @returns IWorldObject containing all the serialized entities.\r\n   */\r\n  public static serializeWorld(world: World): IWorldObject {\r\n    const worldObject: IWorldObject = {\r\n      entities: [],\r\n    };\r\n\r\n    world.getAllEntities().forEach((entity) => {\r\n      // Filter out editor camera.\r\n      if (entity.hasComponent(EditorSceneCamTag)) {\r\n        return;\r\n      }\r\n\r\n      worldObject.entities.push(EntitySerializer.serializeEntity(entity));\r\n    });\r\n\r\n    return worldObject;\r\n  }\r\n\r\n  public static deserializeWorld(world: World, worldObject: IWorldObject) {\r\n    worldObject.entities.forEach((entityObject) => {\r\n      EntitySerializer.deserializeEntity(world, entityObject);\r\n    });\r\n  }\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\n\r\nexport enum EditorControl {\r\n  View,\r\n  Move,\r\n}\r\n\r\nexport interface IEditorUIContext {\r\n  entityLists: HTMLCollectionOf<HTMLDivElement> | null;\r\n  entityInspector: HTMLCollectionOf<HTMLDivElement> | null;\r\n\r\n  playButton: HTMLButtonElement | null;\r\n\r\n  entityNameInput: HTMLInputElement | null;\r\n  createEntityButton: HTMLButtonElement | null;\r\n  deserializeEntityButton: HTMLInputElement | null;\r\n\r\n  saveWorldButton: HTMLButtonElement | null;\r\n  loadWorldButton: HTMLButtonElement | null;\r\n\r\n  editorModeDropdown: HTMLSelectElement | null;\r\n}\r\n\r\nexport interface IEditorEventContext {\r\n  onEntitySelected: Array<(entity: Entity) => void>;\r\n}\r\n\r\nexport interface IEditorControlContext {\r\n  controlMode: EditorControl;\r\n}\r\n\r\nexport const editorUIContext: IEditorUIContext = {\r\n  entityLists: null,\r\n  entityInspector: null,\r\n  playButton: null,\r\n  entityNameInput: null,\r\n  createEntityButton: null,\r\n  deserializeEntityButton: null,\r\n  saveWorldButton: null,\r\n  loadWorldButton: null,\r\n\r\n  editorModeDropdown: null,\r\n};\r\n\r\nexport const editorEventContext: IEditorEventContext = {\r\n  onEntitySelected: [],\r\n};\r\n\r\nexport const editorControlContext: IEditorControlContext = {\r\n  controlMode: EditorControl.Move,\r\n};\r\n", "import { cloneClonable, copyCopyable, createType } from \"ecsy/Types\";\r\nimport { vec2 } from \"gl-matrix\";\r\n\r\n/**\r\n * Wrapper for glmatrix vec2.\r\n *\r\n * @export\r\n * @class Vector2\r\n */\r\nexport class Vector2 {\r\n  value: vec2;\r\n\r\n  /**\r\n   * Creates an instance of Vector2.\r\n   * @param {number} x the x component of the vector.\r\n   * @param {number} y the y component of the vector.\r\n   * @memberof Vector2\r\n   */\r\n  constructor(x: number, y: number) {\r\n    this.value = vec2.fromValues(x, y);\r\n  }\r\n\r\n  set(x: number, y: number) {\r\n    vec2.set(this.value, x, y);\r\n  }\r\n\r\n  copy(v: Vector2): Vector2 {\r\n    this.value = vec2.copy(this.value, v.value);\r\n    return this;\r\n  }\r\n\r\n  clone(): Vector2 {\r\n    return new Vector2(this.value[0], this.value[1]);\r\n  }\r\n}\r\n\r\nexport const Vector2Type = createType({\r\n  name: \"Vector2\",\r\n  default: new Vector2(0, 0),\r\n  copy: copyCopyable<Vector2>,\r\n  clone: cloneClonable<Vector2>,\r\n});\r\n\r\nexport const Vector2CustomEditor = (\r\n  value: Vector2,\r\n  onChange: (value: Vector2) => void\r\n): [HTMLDivElement, (v: Vector2) => void] => {\r\n  const vector2Div = document.createElement(\"div\");\r\n  vector2Div.style.display = \"flex\";\r\n  vector2Div.style.flexDirection = \"row\";\r\n\r\n  const xLabel = document.createElement(\"label\");\r\n  xLabel.innerText = \"X\";\r\n  vector2Div.appendChild(xLabel);\r\n  const xInput = document.createElement(\"input\");\r\n  xInput.type = \"number\";\r\n  xInput.style.minWidth = \"0px\";\r\n  xInput.style.flexGrow = \"1\";\r\n  xInput.value = value.value[0].toString();\r\n  vector2Div.appendChild(xInput);\r\n\r\n  const yLabel = document.createElement(\"label\");\r\n  yLabel.innerText = \"Y\";\r\n  vector2Div.appendChild(yLabel);\r\n  const yInput = document.createElement(\"input\");\r\n  yInput.type = \"number\";\r\n  yInput.style.minWidth = \"0px\";\r\n  yInput.style.flexGrow = \"1\";\r\n  yInput.value = value.value[1].toString();\r\n  vector2Div.appendChild(yInput);\r\n\r\n  const update = () => {\r\n    onChange(new Vector2(parseFloat(xInput.value), parseFloat(yInput.value)));\r\n  };\r\n\r\n  const setVector2 = (v: Vector2) => {\r\n    // If the value is focused, don't update it.\r\n    if (\r\n      document.activeElement === xInput ||\r\n      document.activeElement === yInput\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    xInput.value = v.value[0].toString();\r\n    yInput.value = v.value[1].toString();\r\n  };\r\n\r\n  xInput.onchange = update;\r\n  yInput.onchange = update;\r\n\r\n  return [vector2Div, setVector2];\r\n};\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { quat, vec2, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { OrthographicCameraData3D } from \"../../Core/Render/DataComponent/OrthographicCameraData3D\";\r\nimport { PerspectiveCameraData3D } from \"../../Core/Render/DataComponent/PerspectiveCameraData3D\";\r\nimport { MainCameraTag } from \"../../Core/Render/TagComponent/MainCameraTag\";\r\nimport {\r\n  EditorControl,\r\n  editorControlContext,\r\n} from \"../../Editor/EditorContext\";\r\nimport { Vector2 } from \"../../Mathematics/Vector2\";\r\nimport { Vector3 } from \"../../Mathematics/Vector3\";\r\n\r\nconst rotateSensitive = 0.1;\r\nconst moveSensitive = 7;\r\nconst zoomSensitive = 0.5;\r\n\r\nexport class Cam3DDragSystem extends System {\r\n  static queries: SystemQueries = {\r\n    perspectiveMainCamera: {\r\n      components: [MainCameraTag, PerspectiveCameraData3D, TransformData3D],\r\n    },\r\n    orthographicMainCamera: {\r\n      components: [MainCameraTag, OrthographicCameraData3D, TransformData3D],\r\n    },\r\n  };\r\n\r\n  mainCanvas!: HTMLCanvasElement;\r\n  canvasContext!: CanvasRenderingContext2D;\r\n\r\n  deltaRot: Vector2 = new Vector2(0, 0);\r\n  deltaPos: Vector3 = new Vector3(0, 0, 0);\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    this.mainCanvas = attributes?.mainCanvas;\r\n    this.canvasContext = this.mainCanvas.getContext(\r\n      \"2d\"\r\n    ) as CanvasRenderingContext2D;\r\n\r\n    // Listen to mouse rotate event.\r\n    this.mainCanvas.addEventListener(\"mousemove\", (event) => {\r\n      // Check if the right mouse button is pressed.\r\n      if (event.buttons === 2) {\r\n        // Calculate the delta position.\r\n        vec2.add(\r\n          this.deltaRot.value,\r\n          this.deltaRot.value,\r\n          vec2.fromValues(\r\n            -event.movementX * rotateSensitive,\r\n            event.movementY * rotateSensitive\r\n          )\r\n        );\r\n      }\r\n    });\r\n\r\n    // Listen to mouse move event.\r\n    this.mainCanvas.addEventListener(\"mousemove\", (event) => {\r\n      // Check if the middle mouse button is pressed.\r\n      if (\r\n        event.buttons === 4 ||\r\n        (editorControlContext.controlMode === EditorControl.View &&\r\n          event.buttons === 1)\r\n      ) {\r\n        // Calculate the delta position.\r\n        vec3.add(\r\n          this.deltaPos.value,\r\n          this.deltaPos.value,\r\n          vec3.fromValues(\r\n            event.movementX * rotateSensitive * moveSensitive,\r\n            event.movementY * rotateSensitive * moveSensitive,\r\n            0\r\n          )\r\n        );\r\n      }\r\n    });\r\n\r\n    // Listen to mouse wheel zoom event.\r\n    this.mainCanvas.addEventListener(\"wheel\", (event) => {\r\n      vec3.add(\r\n        this.deltaPos.value,\r\n        this.deltaPos.value,\r\n        vec3.fromValues(0, 0, event.deltaY * zoomSensitive)\r\n      );\r\n    });\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Check if main camera exists.\r\n    if (\r\n      this.queries.perspectiveMainCamera.results.length +\r\n        this.queries.orthographicMainCamera.results.length ===\r\n      0\r\n    ) {\r\n      return;\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (\r\n      this.queries.perspectiveMainCamera.results.length +\r\n        this.queries.orthographicMainCamera.results.length >\r\n      1\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // Get the main camera transform.\r\n    const mainCameraTransform =\r\n      this.queries.perspectiveMainCamera.results[0].getMutableComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n\r\n    // Get the camera front vector front its transform rotation.\r\n    const front = vec3.fromValues(0, 0, -1);\r\n    vec3.transformQuat(front, front, mainCameraTransform.rotation.value);\r\n    // Get the camera right vector from its transform rotation.\r\n    const right = vec3.fromValues(1, 0, 0);\r\n    vec3.transformQuat(right, right, mainCameraTransform.rotation.value);\r\n    // Get the camera up vector from its transform rotation.\r\n    const up = vec3.fromValues(0, 1, 0);\r\n    vec3.transformQuat(up, up, mainCameraTransform.rotation.value);\r\n\r\n    // Rotate the camera around the y-axis.\r\n    const rotX = quat.create();\r\n    quat.rotateY(rotX, rotX, this.deltaRot.value[0] * delta);\r\n    // Rotate the camera around the camera's right vector.\r\n    const rotY = quat.create();\r\n    quat.setAxisAngle(rotY, right, this.deltaRot.value[1] * delta);\r\n    // Combine the two rotations.\r\n    const rot = quat.create();\r\n    quat.multiply(rot, rotX, rotY);\r\n    // Apply the rotation to the camera's rotation.\r\n    quat.multiply(\r\n      mainCameraTransform.rotation.value,\r\n      rot,\r\n      mainCameraTransform.rotation.value\r\n    );\r\n\r\n    // Move the camera position.\r\n    vec3.add(\r\n      mainCameraTransform.position.value,\r\n      mainCameraTransform.position.value,\r\n      vec3.scale(vec3.create(), front, this.deltaPos.value[2] * delta)\r\n    );\r\n    vec3.add(\r\n      mainCameraTransform.position.value,\r\n      mainCameraTransform.position.value,\r\n      vec3.scale(vec3.create(), right, this.deltaPos.value[0] * delta)\r\n    );\r\n    vec3.add(\r\n      mainCameraTransform.position.value,\r\n      mainCameraTransform.position.value,\r\n      vec3.scale(vec3.create(), up, this.deltaPos.value[1] * delta)\r\n    );\r\n\r\n    // Reset the delta rotation.\r\n    vec2.set(this.deltaRot.value, 0, 0);\r\n    // Reset the delta position.\r\n    vec3.set(this.deltaPos.value, 0, 0, 0);\r\n  }\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\nimport { Attributes, System } from \"ecsy/System\";\r\nimport { mat4, vec2, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { Canvas3DRenderer } from \"../../Core/Render/System/Canvas3DRenderer\";\r\nimport { EditorControl, editorControlContext } from \"../EditorContext\";\r\nimport { EditorSceneCamTag } from \"../TagComponent/EditorSceneCamTag\";\r\n\r\nconst moveControlThreshold = 30;\r\n\r\nexport class EditorViewPort3DSystem extends Canvas3DRenderer {\r\n  static inspectEntity: Entity | null = null;\r\n  static inspectTransform: TransformData3D | null = null;\r\n\r\n  mousePosition: vec2 = vec2.create();\r\n  mouseDelta: vec2 = vec2.create();\r\n  mouseInCanvas: boolean = true;\r\n\r\n  highlightAxis: string | null = null;\r\n  movingAxis: string | null = null;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    super.init(attributes);\r\n\r\n    // Update mouse position.\r\n    this.mainCanvas.addEventListener(\"mousemove\", (event) => {\r\n      this.mousePosition = this.getMousePos(event);\r\n      vec2.add(\r\n        this.mouseDelta,\r\n        this.mouseDelta,\r\n        vec2.fromValues(event.movementX, event.movementY)\r\n      );\r\n    });\r\n\r\n    // Update mouse in canvas.\r\n    this.mainCanvas.addEventListener(\"mouseenter\", () => {\r\n      this.mouseInCanvas = true;\r\n    });\r\n    this.mainCanvas.addEventListener(\"mouseleave\", () => {\r\n      this.mouseInCanvas = false;\r\n    });\r\n\r\n    // Update mouse left click.\r\n    this.mainCanvas.addEventListener(\"mousedown\", (event) => {\r\n      if (event.button == 0) {\r\n        if (this.highlightAxis) {\r\n          this.movingAxis = this.highlightAxis;\r\n        }\r\n      }\r\n    });\r\n    this.mainCanvas.addEventListener(\"mouseup\", (event) => {\r\n      if (event.button == 0) {\r\n        this.movingAxis = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Draw selected entity.\r\n    if (\r\n      editorControlContext.controlMode == EditorControl.Move &&\r\n      EditorViewPort3DSystem.inspectTransform &&\r\n      !EditorViewPort3DSystem.inspectEntity?.hasComponent(EditorSceneCamTag)\r\n    ) {\r\n      // Generate object to world matrix.\r\n      const objectToWorld = this.objectToWorld(\r\n        EditorViewPort3DSystem.inspectTransform,\r\n        true\r\n      );\r\n\r\n      // Generate object to screen matrix.\r\n      const objectToScreen = mat4.create();\r\n      mat4.multiply(objectToScreen, this.worldToCamera, objectToWorld);\r\n      mat4.multiply(objectToScreen, this.cameraToScreen, objectToScreen);\r\n\r\n      // Draw the axis.\r\n      this.drawAxis(objectToScreen);\r\n\r\n      // Move the object.\r\n      const startPoint = vec3.create();\r\n      vec3.transformMat4(startPoint, [0, 0, 0], objectToScreen);\r\n      // Get the end points of the axis.\r\n      const endPointX = vec3.create();\r\n      vec3.transformMat4(endPointX, [1, 0, 0], objectToScreen);\r\n      const endPointY = vec3.create();\r\n      vec3.transformMat4(endPointY, [0, 1, 0], objectToScreen);\r\n      const endPointZ = vec3.create();\r\n      vec3.transformMat4(endPointZ, [0, 0, 1], objectToScreen);\r\n      // If the mouse is in the canvas.\r\n      if (this.mouseInCanvas) {\r\n        // Get the closest axis.\r\n        const xDistance = vec2.distance(\r\n          this.mousePosition,\r\n          vec2.fromValues(endPointX[0], endPointX[1])\r\n        );\r\n        const yDistance = vec2.distance(\r\n          this.mousePosition,\r\n          vec2.fromValues(endPointY[0], endPointY[1])\r\n        );\r\n        const zDistance = vec2.distance(\r\n          this.mousePosition,\r\n          vec2.fromValues(endPointZ[0], endPointZ[1])\r\n        );\r\n\r\n        const minDistance = Math.min(xDistance, yDistance, zDistance);\r\n\r\n        // If the mouse is close enough to the axis.\r\n        if (minDistance < moveControlThreshold) {\r\n          // Move the object.\r\n          if (minDistance == xDistance) {\r\n            // Highlight the axis.\r\n            this.canvasContext.strokeStyle = \"red\";\r\n            this.canvasContext.beginPath();\r\n            this.canvasContext.arc(\r\n              endPointX[0],\r\n              endPointX[1],\r\n              moveControlThreshold,\r\n              0,\r\n              2 * Math.PI\r\n            );\r\n            this.canvasContext.stroke();\r\n\r\n            this.highlightAxis = \"x\";\r\n          } else if (minDistance == yDistance) {\r\n            // Highlight the axis.\r\n            this.canvasContext.strokeStyle = \"green\";\r\n            this.canvasContext.beginPath();\r\n            this.canvasContext.arc(\r\n              endPointY[0],\r\n              endPointY[1],\r\n              moveControlThreshold,\r\n              0,\r\n              2 * Math.PI\r\n            );\r\n            this.canvasContext.stroke();\r\n\r\n            this.highlightAxis = \"y\";\r\n          } else if (minDistance == zDistance) {\r\n            // Highlight the axis.\r\n            this.canvasContext.strokeStyle = \"blue\";\r\n            this.canvasContext.beginPath();\r\n            this.canvasContext.arc(\r\n              endPointZ[0],\r\n              endPointZ[1],\r\n              moveControlThreshold,\r\n              0,\r\n              2 * Math.PI\r\n            );\r\n            this.canvasContext.stroke();\r\n\r\n            this.highlightAxis = \"z\";\r\n          }\r\n        } else {\r\n          this.highlightAxis = null;\r\n        }\r\n\r\n        // Move the object.\r\n        if (this.movingAxis) {\r\n          switch (this.movingAxis) {\r\n            case \"x\":\r\n              this.moveAxis(endPointX, startPoint, 0);\r\n              break;\r\n\r\n            case \"y\":\r\n              this.moveAxis(endPointY, startPoint, 1);\r\n              break;\r\n\r\n            case \"z\":\r\n              this.moveAxis(endPointZ, startPoint, 2);\r\n              break;\r\n\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Reset mouse delta.\r\n    vec2.set(this.mouseDelta, 0, 0);\r\n  }\r\n\r\n  /**\r\n   * Move the object along the axis.\r\n   * @param axisEndPoint the end point of the axis.\r\n   * @param startPoint the start point of the axis.\r\n   */\r\n  private moveAxis(axisEndPoint: vec3, startPoint: vec3, axisIndex: number) {\r\n    const axisDir = vec2.create();\r\n    vec2.sub(\r\n      axisDir,\r\n      vec2.fromValues(axisEndPoint[0], axisEndPoint[1]),\r\n      vec2.fromValues(startPoint[0], startPoint[1])\r\n    );\r\n    // Get the mouse move magnitude on the axis.\r\n    let axisMove = vec2.dot(\r\n      axisDir,\r\n      vec2.fromValues(this.mouseDelta[0], this.mouseDelta[1])\r\n    );\r\n    axisMove = axisMove / Math.pow(vec2.length(axisDir), 2);\r\n\r\n    // Move the object.\r\n    if (EditorViewPort3DSystem.inspectTransform) {\r\n      EditorViewPort3DSystem.inspectTransform.position.value[axisIndex] +=\r\n        axisMove;\r\n\r\n      // Update the transform.\r\n      EditorViewPort3DSystem.inspectEntity?.getMutableComponent(\r\n        TransformData3D\r\n      );\r\n    }\r\n  }\r\n\r\n  drawAxis(objectToScreen: mat4): void {\r\n    // Generate screen space start point.\r\n    const startPoint = vec3.create();\r\n    vec3.transformMat4(startPoint, [0, 0, 0], objectToScreen);\r\n\r\n    // Generate screen space end point.\r\n    const endPointX = vec3.create();\r\n    vec3.transformMat4(endPointX, [1, 0, 0], objectToScreen);\r\n    const endPointY = vec3.create();\r\n    vec3.transformMat4(endPointY, [0, 1, 0], objectToScreen);\r\n    const endPointZ = vec3.create();\r\n    vec3.transformMat4(endPointZ, [0, 0, 1], objectToScreen);\r\n\r\n    // Draw the line.\r\n    this.drawLine(startPoint, endPointX, \"red\", 1);\r\n    this.drawLine(startPoint, endPointY, \"green\", 1);\r\n    this.drawLine(startPoint, endPointZ, \"blue\", 1);\r\n  }\r\n\r\n  /**\r\n   * Get the mouse position in screen space.\r\n   *\r\n   * @param event canvas mouse event.\r\n   * @returns mouse position in screen space.\r\n   */\r\n  getMousePos(event: MouseEvent): vec2 {\r\n    const rect = this.mainCanvas.getBoundingClientRect();\r\n    return vec2.fromValues(event.clientX - rect.left, event.clientY - rect.top);\r\n  }\r\n}\r\n", "import { World } from \"ecsy/World\";\r\nimport { IWorldRegister } from \"../Utils/IWorldRegister\";\r\nimport { Cam3DDragSystem } from \"../Utils/System/Cam3DDragSystem\";\r\nimport { EditorViewPort3DSystem } from \"./System/EditorViewPort3DSystem\";\r\n\r\nexport class EditorSystem3DRegister {\r\n  mainCanvas: HTMLCanvasElement;\r\n\r\n  constructor(mainCanvas: HTMLCanvasElement) {\r\n    this.mainCanvas = mainCanvas;\r\n  }\r\n\r\n  register: IWorldRegister = (world: World) => {\r\n    world\r\n      .registerSystem(Cam3DDragSystem, {\r\n        mainCanvas: this.mainCanvas,\r\n      })\r\n      .registerSystem(EditorViewPort3DSystem, {\r\n        mainCanvas: this.mainCanvas,\r\n      });\r\n  };\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { MainCameraTag } from \"../../Core/Render/TagComponent/MainCameraTag\";\r\nimport { EditorSceneCamTag } from \"../TagComponent/EditorSceneCamTag\";\r\n\r\nexport class EditorCamTagAppendSystem extends System {\r\n  static queries: SystemQueries = {\r\n    mainCamera: {\r\n      components: [MainCameraTag],\r\n    },\r\n  };\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    // Check if main camera exists.\r\n    if (this.queries.mainCamera.results.length === 0) {\r\n      throw new Error(\"Main camera not found.\");\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (this.queries.mainCamera.results.length > 1) {\r\n      throw new Error(\"More than one main camera found.\");\r\n    }\r\n\r\n    // Append editor camera tag.\r\n    this.queries.mainCamera.results[0].addComponent(EditorSceneCamTag);\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Do nothing.\r\n  }\r\n}\r\n", "import { TagComponent } from \"ecsy/TagComponent\";\r\nimport { IComponent } from \"../../Core/ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class SelectableObject extends TagComponent {}\r\n", "import { COMPONENT_CHANGE_EVENT } from \"ecsy/Component\";\r\nimport { Entity } from \"ecsy/Entity\";\r\nimport fileDownload from \"js-file-download\";\r\nimport { IComponent } from \"../../Core/ComponentRegistry\";\r\nimport { TransformData2D } from \"../../Core/Locomotion/DataComponent/TransformData2D\";\r\nimport { TransformData3D } from \"../../Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { EntitySerializer } from \"../../Core/Serialization/EntitySerializer\";\r\nimport { editorUIContext } from \"../EditorContext\";\r\nimport { EditorSelectedTag } from \"../TagComponent/EditorSelectedTag\";\r\nimport { EditorViewPort2DSystem } from \"./EditorViewPort2DSystems\";\r\nimport { EditorViewPort3DSystem } from \"./EditorViewPort3DSystem\";\r\n\r\nexport const updateEntityInspector = (entity: Entity | null) => {\r\n  // Check if the inspectEntity has Transform component.\r\n  if (entity?.hasComponent(TransformData2D)) {\r\n    // Removed the EditorSelectedTag from the previous entity.\r\n    if (EditorViewPort2DSystem.inspectEntity) {\r\n      EditorViewPort2DSystem.inspectEntity.removeComponent(EditorSelectedTag);\r\n    }\r\n\r\n    EditorViewPort2DSystem.inspectEntity = entity;\r\n\r\n    // Add the EditorSelectedTag to the new entity.\r\n    if (EditorViewPort2DSystem.inspectEntity) {\r\n      EditorViewPort2DSystem.inspectEntity.addComponent(EditorSelectedTag);\r\n    }\r\n\r\n    EditorViewPort2DSystem.inspectTransform = entity.getComponent(\r\n      TransformData2D\r\n    ) as Readonly<TransformData2D>;\r\n  } else if (entity?.hasComponent(TransformData3D)) {\r\n    // Removed the EditorSelectedTag from the previous entity.\r\n    if (EditorViewPort3DSystem.inspectEntity) {\r\n      EditorViewPort3DSystem.inspectEntity.removeComponent(EditorSelectedTag);\r\n    }\r\n\r\n    EditorViewPort3DSystem.inspectEntity = entity;\r\n\r\n    // Add the EditorSelectedTag to the new entity.\r\n    if (EditorViewPort3DSystem.inspectEntity) {\r\n      EditorViewPort3DSystem.inspectEntity.addComponent(EditorSelectedTag);\r\n    }\r\n\r\n    EditorViewPort3DSystem.inspectTransform = entity.getMutableComponent(\r\n      TransformData3D\r\n    ) as TransformData3D;\r\n  } else {\r\n    EditorViewPort2DSystem.inspectTransform = null;\r\n    EditorViewPort3DSystem.inspectTransform = null;\r\n  }\r\n\r\n  displayEntityInspector(entity);\r\n};\r\n\r\nexport const displayEntityInspector = (entity: Entity | null) => {\r\n  if (!editorUIContext.entityInspector) {\r\n    return;\r\n  }\r\n\r\n  if (entity === null) {\r\n    // Traverse all entityInspectors.\r\n    for (let i = 0; i < editorUIContext.entityInspector.length; i++) {\r\n      const entityInspector = editorUIContext.entityInspector[i];\r\n      // Remove all children.\r\n      while (entityInspector.firstChild) {\r\n        entityInspector.removeChild(entityInspector.firstChild);\r\n      }\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  // Get all components of entity.\r\n  const components = entity.getComponents();\r\n  const componentIndices = Object.keys(components);\r\n\r\n  // Traverse all entityInspectors.\r\n  for (let i = 0; i < editorUIContext.entityInspector.length; i++) {\r\n    const entityInspector = editorUIContext.entityInspector[i];\r\n    // Remove all children.\r\n    while (entityInspector.firstChild) {\r\n      entityInspector.removeChild(entityInspector.firstChild);\r\n    }\r\n\r\n    // Entity operations\r\n    const entityOperationDiv = document.createElement(\"div\");\r\n    entityOperationDiv.className = \"componentListItem\";\r\n\r\n    // Add remove entity button.\r\n    addRemoveEntityButton(entity, entityOperationDiv);\r\n    // Add serialize entity button.\r\n    addSerializeEntityButton(entity, entityOperationDiv);\r\n\r\n    entityInspector.appendChild(entityOperationDiv);\r\n\r\n    // Add components data.\r\n    for (let j = 0; j < componentIndices.length; j++) {\r\n      const componentIndex = componentIndices[j];\r\n      const component = components[componentIndex];\r\n\r\n      const componentObject = EntitySerializer.serializeComponent(component);\r\n\r\n      // Add component name.\r\n      const componentDiv = document.createElement(\"div\");\r\n      // Set css class.\r\n      componentDiv.className = \"componentListItem\";\r\n\r\n      const componentTitle = document.createElement(\"h3\");\r\n      componentTitle.innerText = componentObject.type;\r\n      componentDiv.appendChild(componentTitle);\r\n\r\n      // Custom inspector here.\r\n      if (component.onInspector) {\r\n        component.onInspector(componentDiv);\r\n      }\r\n\r\n      // Add a spacer.\r\n      const spacer = document.createElement(\"div\");\r\n      spacer.style.height = \"10px\";\r\n      componentDiv.appendChild(spacer);\r\n\r\n      // Default inspector here.\r\n      if (!component.onInspector || component.useDefaultInspector) {\r\n        const componentData = document.createElement(\"span\");\r\n        componentData.className = \"textarea\";\r\n        componentData.contentEditable = \"true\";\r\n        componentData.textContent = JSON.stringify(\r\n          componentObject.data,\r\n          null,\r\n          2\r\n        );\r\n        componentData.style.whiteSpace = \"pre-wrap\";\r\n        componentData.style.resize = \"none\";\r\n        componentDiv.appendChild(componentData);\r\n\r\n        // When component data is changed.\r\n        componentData.addEventListener(\"input\", (event) => {\r\n          const target = event.target as HTMLTextAreaElement;\r\n          try {\r\n            const newComponentData = JSON.parse(target.textContent || \"{}\");\r\n            component.copy(newComponentData);\r\n            // Call change event.\r\n            entity.getMutableComponent(\r\n              Object.getPrototypeOf(component).constructor\r\n            );\r\n          } catch (error) {\r\n            console.error(error);\r\n            return;\r\n          }\r\n        });\r\n\r\n        // When component data is changed.\r\n        component.eventEmitter.on(COMPONENT_CHANGE_EVENT, (component) => {\r\n          const componentObject =\r\n            EntitySerializer.serializeComponent(component);\r\n          // Check if the componentData box is focused.\r\n          if (document.activeElement !== componentData) {\r\n            componentData.textContent = JSON.stringify(\r\n              componentObject.data,\r\n              null,\r\n              2\r\n            );\r\n          }\r\n        });\r\n      }\r\n\r\n      // Add a remove button.\r\n      const removeButton = document.createElement(\"button\");\r\n      removeButton.innerText = \"Remove\";\r\n      removeButton.onclick = () => {\r\n        // Remove component.\r\n        entity.removeComponent(Object.getPrototypeOf(component).constructor);\r\n        // Update entity inspector.\r\n        updateEntityInspector(entity);\r\n      };\r\n      componentDiv.appendChild(removeButton);\r\n\r\n      // Add component to entityInspector.\r\n      entityInspector.appendChild(componentDiv);\r\n    }\r\n\r\n    // Add component feature.\r\n    addComponentButton(entity, entityInspector);\r\n  }\r\n};\r\n\r\nfunction addSerializeEntityButton(\r\n  entity: Entity,\r\n  entityOperationDiv: HTMLDivElement\r\n) {\r\n  const serializeEntityButton = document.createElement(\"button\");\r\n  serializeEntityButton.innerText = \"Serialize Entity\";\r\n  serializeEntityButton.style.width = \"100%\";\r\n  serializeEntityButton.onclick = () => {\r\n    const serializedEntity = EntitySerializer.serializeEntity(entity);\r\n    fileDownload(JSON.stringify(serializedEntity, null, 2), \"entity.json\");\r\n  };\r\n  entityOperationDiv.appendChild(serializeEntityButton);\r\n}\r\n\r\n/**\r\n * Add a new component to entity.\r\n *\r\n * @param entity the entity to add component to.\r\n * @param entityInspector the entity inspector to add component button to.\r\n */\r\nfunction addComponentButton(entity: Entity, entityInspector: HTMLDivElement) {\r\n  const componentAddDiv = document.createElement(\"div\");\r\n  componentAddDiv.className = \"componentListItem\";\r\n\r\n  const componentNameInput = document.createElement(\"select\");\r\n  const componentList = IComponent.getImplementations();\r\n  const componentNames = componentList.map((component) => component.name);\r\n  for (let j = 0; j < componentNames.length; j++) {\r\n    const componentName = componentNames[j];\r\n    const option = document.createElement(\"option\");\r\n    option.value = componentName;\r\n    option.innerText = componentName;\r\n    componentNameInput.appendChild(option);\r\n  }\r\n  componentAddDiv.appendChild(componentNameInput);\r\n\r\n  // Add \"Add Component\" button.\r\n  const addComponentButton = document.createElement(\"button\");\r\n  addComponentButton.style.width = \"100%\";\r\n  addComponentButton.innerText = \"Add Component\";\r\n  addComponentButton.onclick = () => {\r\n    // Add component.\r\n    const componentList = IComponent.getImplementations();\r\n    // Get the component with the name.\r\n    let component = componentList.find(\r\n      (component) => component.name === componentNameInput.value\r\n    );\r\n    if (component) {\r\n      // Add component to entity.\r\n      entity.addComponent(component);\r\n      updateEntityInspector(entity);\r\n    } else {\r\n      console.error(\"Component not found.\");\r\n    }\r\n  };\r\n  componentAddDiv.appendChild(addComponentButton);\r\n\r\n  entityInspector.appendChild(componentAddDiv);\r\n}\r\n\r\n/**\r\n * Remove the entity.\r\n *\r\n * @param entity the entity to remove.\r\n * @param entityOperationDiv the entity operation div to add remove button to.\r\n */\r\nfunction addRemoveEntityButton(\r\n  entity: Entity,\r\n  entityOperationDiv: HTMLDivElement\r\n) {\r\n  const removeEntityButton = document.createElement(\"button\");\r\n  removeEntityButton.innerText = \"Remove Entity\";\r\n  removeEntityButton.style.width = \"100%\";\r\n  removeEntityButton.onclick = () => {\r\n    // Remove entity.\r\n    entity.remove();\r\n    // Update entity inspector.\r\n    updateEntityInspector(null);\r\n  };\r\n\r\n  entityOperationDiv.appendChild(removeEntityButton);\r\n}\r\n", "import {\r\n  Component,\r\n  ComponentSchema,\r\n  COMPONENT_CHANGE_EVENT,\r\n} from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport {\r\n  Vector2,\r\n  Vector2CustomEditor,\r\n  Vector2Type,\r\n} from \"../../../Mathematics/Vector2\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class TransformData2D extends Component<TransformData2D> {\r\n  static schema: ComponentSchema = {\r\n    position: {\r\n      type: Vector2Type,\r\n      default: new Vector2(0, 0),\r\n    },\r\n    rotation: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n    scale: {\r\n      type: Vector2Type,\r\n      default: new Vector2(1, 1),\r\n    },\r\n  };\r\n\r\n  position!: Vector2;\r\n  rotation!: number;\r\n  scale!: Vector2;\r\n\r\n  public useDefaultInspector: boolean = false;\r\n\r\n  public onInspector = (componentDiv: HTMLDivElement) => {\r\n    const transformDiv = document.createElement(\"div\");\r\n\r\n    // Position editor.\r\n    const positionDiv = document.createElement(\"div\");\r\n    // Position title.\r\n    positionDiv.appendChild(document.createTextNode(\"Position\"));\r\n    // Position Vector2 editor.\r\n    const [positionVector2Div, setPosition] = Vector2CustomEditor(\r\n      this.position,\r\n      (newValue) => {\r\n        this.position = newValue;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      }\r\n    );\r\n    positionDiv.appendChild(positionVector2Div);\r\n\r\n    // Rotation editor.\r\n    const rotationDiv = document.createElement(\"div\");\r\n    // Rotation title.\r\n    rotationDiv.appendChild(document.createTextNode(\"Rotation\"));\r\n    // Rotation input.\r\n    const rotationInput = document.createElement(\"input\");\r\n    rotationInput.type = \"number\";\r\n    rotationInput.style.minWidth = \"0px\";\r\n    rotationInput.style.width = \"100%\";\r\n    rotationInput.value = this.rotation.toString();\r\n    rotationInput.onchange = (event) => {\r\n      this.rotation = parseFloat((event.target as HTMLInputElement).value);\r\n      this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n    };\r\n    rotationDiv.appendChild(rotationInput);\r\n\r\n    // Scale editor.\r\n    const scaleDiv = document.createElement(\"div\");\r\n    // Scale title.\r\n    scaleDiv.appendChild(document.createTextNode(\"Scale\"));\r\n    // Scale Vector2 editor.\r\n    const [scaleVector2Div, setScale] = Vector2CustomEditor(\r\n      this.scale,\r\n      (newValue) => {\r\n        this.scale = newValue;\r\n        this.eventEmitter.emit(COMPONENT_CHANGE_EVENT, this);\r\n      }\r\n    );\r\n    scaleDiv.appendChild(scaleVector2Div);\r\n\r\n    componentDiv.appendChild(positionDiv);\r\n    componentDiv.appendChild(rotationDiv);\r\n    componentDiv.appendChild(scaleDiv);\r\n\r\n    this.eventEmitter.on(COMPONENT_CHANGE_EVENT, (component) => {\r\n      setPosition(component.position);\r\n      // Modify the rotation input value if it's not focused.\r\n      if (document.activeElement !== rotationInput) {\r\n        rotationInput.value = component.rotation.toString();\r\n      }\r\n      setScale(component.scale);\r\n    });\r\n\r\n    componentDiv.appendChild(transformDiv);\r\n  };\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"../../ComponentRegistry\";\r\n\r\nexport enum BackgroundType {\r\n  Color = 0,\r\n  Texture = 1,\r\n}\r\n\r\n@IComponent.register\r\nexport class CameraData2D extends Component<CameraData2D> {\r\n  static schema: ComponentSchema = {\r\n    backgroundType: {\r\n      type: Types.Number,\r\n      default: BackgroundType.Color,\r\n    },\r\n    backgroundColor: {\r\n      type: Types.String,\r\n      default: \"#000000\",\r\n    },\r\n    backgroundTexture: {\r\n      type: Types.String,\r\n      default: \"\",\r\n    },\r\n  };\r\n\r\n  backgroundType!: BackgroundType;\r\n\r\n  backgroundColor!: string;\r\n  backgroundTexture!: string;\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { mat3, vec2 } from \"gl-matrix\";\r\nimport { TransformData2D } from \"../../Locomotion/DataComponent/TransformData2D\";\r\nimport { CameraData2D } from \"../DataComponent/CameraData2D\";\r\nimport { MainCameraTag } from \"../TagComponent/MainCameraTag\";\r\n\r\n/**\r\n * Base class for canvas renderers.\r\n */\r\nexport class Canvas2DRenderer extends System {\r\n  static queries: SystemQueries = {\r\n    mainCamera: {\r\n      components: [MainCameraTag, CameraData2D, TransformData2D],\r\n    },\r\n  };\r\n\r\n  mainCanvas!: HTMLCanvasElement;\r\n  canvasContext!: CanvasRenderingContext2D;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    this.mainCanvas = attributes?.mainCanvas;\r\n    this.canvasContext = this.mainCanvas.getContext(\r\n      \"2d\"\r\n    ) as CanvasRenderingContext2D;\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Check if main camera exists.\r\n    if (this.queries.mainCamera.results.length === 0) {\r\n      throw new Error(\"Main camera not found.\");\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (this.queries.mainCamera.results.length > 1) {\r\n      throw new Error(\"More than one main camera found.\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Construct a transform matrix from world position to camera space.\r\n   *\r\n   * @param camTransform The transform of the camera.\r\n   * @param canvasSize the size of the canvas in vector2.\r\n   */\r\n  worldToCamera(camTransform: TransformData2D, canvasSize: vec2): mat3 {\r\n    // Construct world to camera matrix.\r\n    const worldToCamera = mat3.create();\r\n    // Center the camera.\r\n    mat3.fromTranslation(\r\n      worldToCamera,\r\n      vec2.fromValues(canvasSize[0] / 2, canvasSize[1] / 2)\r\n    );\r\n    mat3.scale(worldToCamera, worldToCamera, camTransform.scale.value);\r\n    mat3.translate(\r\n      worldToCamera,\r\n      worldToCamera,\r\n      vec2.negate(vec2.create(), camTransform.position.value)\r\n    );\r\n    mat3.rotate(worldToCamera, worldToCamera, camTransform.rotation);\r\n\r\n    return worldToCamera;\r\n  }\r\n\r\n  /**\r\n   * Construct a transform matrix from object space to world space.\r\n   *\r\n   * @param objTransform\r\n   */\r\n  objectToWorld(objTransform: TransformData2D): mat3 {\r\n    // TODO: Convert local transform to world transform.\r\n    // Construct entity to world matrix.\r\n    const objectToWorld = mat3.create();\r\n    mat3.fromTranslation(objectToWorld, objTransform.position.value);\r\n    mat3.rotate(objectToWorld, objectToWorld, objTransform.rotation);\r\n    mat3.scale(objectToWorld, objectToWorld, objTransform.scale.value);\r\n\r\n    return objectToWorld;\r\n  }\r\n}\r\n", "import { COMPONENT_CHANGE_EVENT } from \"ecsy/Component\";\r\nimport { Entity } from \"ecsy/Entity\";\r\nimport { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { mat3, vec2 } from \"gl-matrix\";\r\nimport fileDownload from \"js-file-download\";\r\nimport { IComponent } from \"../../Core/ComponentRegistry\";\r\nimport { TransformData2D } from \"../../Core/Locomotion/DataComponent/TransformData2D\";\r\nimport { Canvas2DRenderer } from \"../../Core/Render/System/Canvas2DRenderer\";\r\nimport { EntitySerializer } from \"../../Core/Serialization/EntitySerializer\";\r\nimport { Vector2 } from \"../../Mathematics/Vector2\";\r\nimport { editorUIContext } from \"../EditorContext\";\r\nimport { EditorSceneCamTag } from \"../TagComponent/EditorSceneCamTag\";\r\nimport { EditorSelectedTag } from \"../TagComponent/EditorSelectedTag\";\r\nimport { updateEntityInspector } from \"./EditorInspectorSystem\";\r\n\r\nconst highlightThreshold = 25;\r\nconst axisLength = 50;\r\n\r\n// TODO: Split all inspector operations into ECS based systems.\r\nexport class EditorViewPort2DSystem extends Canvas2DRenderer {\r\n  static inspectEntity: Entity | null = null;\r\n  static inspectTransform: Readonly<TransformData2D> | null = null;\r\n\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    highlightEntity: {\r\n      components: [TransformData2D],\r\n    },\r\n  };\r\n\r\n  highlightEntity: Entity | null = null;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    super.init(attributes);\r\n\r\n    // Register mouse move event for main canvas.\r\n    this.mainCanvas.addEventListener(\"mousemove\", (event) => {\r\n      const mousePos = this.getMousePos(event);\r\n\r\n      // If left mouse button is pressed, move the entity.\r\n      if (event.buttons === 1) {\r\n        const mouseWorldPos = this.screenToWorld(mousePos);\r\n\r\n        if (EditorViewPort2DSystem.inspectEntity) {\r\n          const transform =\r\n            EditorViewPort2DSystem.inspectEntity.getMutableComponent(\r\n              TransformData2D\r\n            ) as TransformData2D;\r\n\r\n          transform.position = new Vector2(mouseWorldPos[0], mouseWorldPos[1]);\r\n\r\n          // Update the transform component.\r\n          EditorViewPort2DSystem.inspectEntity.getMutableComponent(\r\n            TransformData2D\r\n          );\r\n        }\r\n      } else {\r\n        // Pick the closest entity and highlight it.\r\n        let closestEntity: Entity | null = null;\r\n        let closestDistance = Number.MAX_VALUE;\r\n\r\n        // Find the closest entity.\r\n        this.queries.highlightEntity.results.forEach((entity) => {\r\n          const transform = entity.getComponent(\r\n            TransformData2D\r\n          ) as TransformData2D;\r\n          const distance = vec2.distance(\r\n            mousePos,\r\n            this.worldToScreen(transform.position.value)\r\n          );\r\n\r\n          if (\r\n            distance < highlightThreshold &&\r\n            distance < closestDistance &&\r\n            !entity.hasComponent(EditorSceneCamTag)\r\n          ) {\r\n            closestEntity = entity;\r\n            closestDistance = distance;\r\n          }\r\n        });\r\n\r\n        // Set the highlight entity.\r\n        this.highlightEntity = closestEntity;\r\n      }\r\n    });\r\n\r\n    // Register left mouse down.\r\n    this.mainCanvas.addEventListener(\"mousedown\", (event) => {\r\n      if (event.button === 0) {\r\n        if (this.highlightEntity) {\r\n          // Select the entity.\r\n          updateEntityInspector(this.highlightEntity);\r\n        } else {\r\n          // Clear the entity inspector.\r\n          updateEntityInspector(null);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Draw transform and enable selection here.\r\n\r\n    // Get the camera transform.\r\n    const cameraTransform = this.queries.mainCamera.results[0].getComponent(\r\n      TransformData2D\r\n    ) as TransformData2D;\r\n    // Get the canvas size.\r\n    const canvasSize = vec2.fromValues(\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height\r\n    );\r\n\r\n    // Construct world to camera matrix.\r\n    const worldToCamera = mat3.create();\r\n    mat3.multiply(\r\n      worldToCamera,\r\n      worldToCamera,\r\n      this.worldToCamera(cameraTransform, canvasSize)\r\n    );\r\n\r\n    // Draw selected entity.\r\n    if (EditorViewPort2DSystem.inspectTransform) {\r\n      // Construct object to camera matrix.\r\n      const inspectObjToCamera = mat3.create();\r\n      mat3.multiply(\r\n        inspectObjToCamera,\r\n        worldToCamera,\r\n        this.objectToWorld(EditorViewPort2DSystem.inspectTransform)\r\n      );\r\n\r\n      this.drawAxis(inspectObjToCamera);\r\n    }\r\n\r\n    // Draw highlight.\r\n    if (this.highlightEntity) {\r\n      const transform = this.highlightEntity.getComponent(\r\n        TransformData2D\r\n      ) as TransformData2D;\r\n\r\n      const highlightObjToCamera = mat3.create();\r\n      mat3.multiply(\r\n        highlightObjToCamera,\r\n        worldToCamera,\r\n        this.objectToWorld(transform)\r\n      );\r\n\r\n      this.drawHighlight(highlightObjToCamera);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the mouse position in screen space.\r\n   *\r\n   * @param event canvas mouse event.\r\n   * @returns mouse position in screen space.\r\n   */\r\n  getMousePos(event: MouseEvent): vec2 {\r\n    const rect = this.mainCanvas.getBoundingClientRect();\r\n    return vec2.fromValues(event.clientX - rect.left, event.clientY - rect.top);\r\n  }\r\n\r\n  /**\r\n   * Convert screen space to world space.\r\n   *\r\n   * @param screenPos screen position.\r\n   * @returns world position.\r\n   */\r\n  screenToWorld(screenPos: vec2): vec2 {\r\n    // Check if main camera exists.\r\n    if (this.queries.mainCamera.results.length === 0) {\r\n      throw new Error(\"Main camera not found.\");\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (this.queries.mainCamera.results.length > 1) {\r\n      throw new Error(\"More than one main camera found.\");\r\n    }\r\n\r\n    const cameraTransform = this.queries.mainCamera.results[0].getComponent(\r\n      TransformData2D\r\n    ) as TransformData2D;\r\n    const canvasSize = vec2.fromValues(\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height\r\n    );\r\n\r\n    const worldPos = vec2.create();\r\n    vec2.transformMat3(\r\n      worldPos,\r\n      screenPos,\r\n      mat3.invert(\r\n        mat3.create(),\r\n        this.worldToCamera(cameraTransform, canvasSize)\r\n      )\r\n    );\r\n\r\n    return worldPos;\r\n  }\r\n\r\n  /**\r\n   * Convert world space to screen space.\r\n   *\r\n   * @param worldPos world position.\r\n   * @returns screen position.\r\n   */\r\n  worldToScreen(worldPos: vec2): vec2 {\r\n    // Check if main camera exists.\r\n    if (this.queries.mainCamera.results.length === 0) {\r\n      throw new Error(\"Main camera not found.\");\r\n    }\r\n    // Check if there's more than one main camera.\r\n    else if (this.queries.mainCamera.results.length > 1) {\r\n      throw new Error(\"More than one main camera found.\");\r\n    }\r\n\r\n    const cameraTransform = this.queries.mainCamera.results[0].getComponent(\r\n      TransformData2D\r\n    ) as TransformData2D;\r\n    const canvasSize = vec2.fromValues(\r\n      this.mainCanvas.width,\r\n      this.mainCanvas.height\r\n    );\r\n\r\n    const screenPos = vec2.create();\r\n    vec2.transformMat3(\r\n      screenPos,\r\n      worldPos,\r\n      this.worldToCamera(cameraTransform, canvasSize)\r\n    );\r\n\r\n    return screenPos;\r\n  }\r\n\r\n  drawAxis(inspectObjToCamera: mat3): void {\r\n    // Get the starting position.\r\n    const startPos = vec2.fromValues(0, 0);\r\n    vec2.transformMat3(startPos, startPos, inspectObjToCamera);\r\n    // Get the x axis position.\r\n    const xAxisPos = vec2.fromValues(1, 0);\r\n    vec2.transformMat3(xAxisPos, xAxisPos, inspectObjToCamera);\r\n    // Get the y axis position.\r\n    const yAxisPos = vec2.fromValues(0, 1);\r\n    vec2.transformMat3(yAxisPos, yAxisPos, inspectObjToCamera);\r\n\r\n    // Normalize the axis: xEnd = xStart + normalize(xAxis - xStart)\r\n    vec2.add(\r\n      xAxisPos,\r\n      startPos,\r\n      vec2.scale(\r\n        vec2.create(),\r\n        vec2.normalize(\r\n          vec2.create(),\r\n          vec2.sub(vec2.create(), xAxisPos, startPos)\r\n        ),\r\n        axisLength\r\n      )\r\n    );\r\n\r\n    // Normalize the axis: yEnd = yStart + normalize(yAxis - yStart)\r\n    vec2.add(\r\n      yAxisPos,\r\n      startPos,\r\n      vec2.scale(\r\n        vec2.create(),\r\n        vec2.normalize(\r\n          vec2.create(),\r\n          vec2.sub(vec2.create(), yAxisPos, startPos)\r\n        ),\r\n        axisLength\r\n      )\r\n    );\r\n\r\n    // Draw the x axis.\r\n    this.canvasContext.strokeStyle = \"red\";\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.lineWidth = 2;\r\n    this.canvasContext.moveTo(startPos[0], startPos[1]);\r\n    this.canvasContext.lineTo(xAxisPos[0], xAxisPos[1]);\r\n    this.canvasContext.stroke();\r\n\r\n    // Draw the y axis.\r\n    this.canvasContext.strokeStyle = \"blue\";\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.lineWidth = 2;\r\n    this.canvasContext.moveTo(startPos[0], startPos[1]);\r\n    this.canvasContext.lineTo(yAxisPos[0], yAxisPos[1]);\r\n    this.canvasContext.stroke();\r\n  }\r\n\r\n  drawHighlight(highlightObjToCamera: mat3): void {\r\n    // Get the highlight position.\r\n    const startPos = vec2.fromValues(0, 0);\r\n    vec2.transformMat3(startPos, startPos, highlightObjToCamera);\r\n\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.strokeStyle = \"blue\";\r\n    this.canvasContext.lineWidth = 2;\r\n    this.canvasContext.arc(\r\n      startPos[0],\r\n      startPos[1],\r\n      highlightThreshold,\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    this.canvasContext.stroke();\r\n  }\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\nimport { Attributes, SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec2, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"../../Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { Canvas3DRenderer } from \"../../Core/Render/System/Canvas3DRenderer\";\r\nimport { SelectableObject } from \"../TagComponents/SelectableObject\";\r\nimport { updateEntityInspector } from \"../../Editor/System/EditorInspectorSystem\";\r\n\r\nconst highlightThreshold = 30;\r\n\r\nexport class Object3DSelectSystem extends Canvas3DRenderer {\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    selectableEntities: {\r\n      components: [TransformData3D, SelectableObject],\r\n    },\r\n  };\r\n\r\n  mousePosition: vec2 = vec2.create();\r\n  highlightEntity: Entity | null = null;\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    super.init(attributes);\r\n\r\n    // Update mouse position.\r\n    this.mainCanvas.addEventListener(\"mousemove\", (event) => {\r\n      this.mousePosition = this.getMousePos(event);\r\n    });\r\n\r\n    // Update mouse left click.\r\n    this.mainCanvas.addEventListener(\"mousedown\", (event) => {\r\n      if (event.button == 0) {\r\n        if (this.highlightEntity) {\r\n          updateEntityInspector(this.highlightEntity);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Generate world to screen matrix.\r\n    const worldToScreenMatrix = mat4.create();\r\n    mat4.multiply(worldToScreenMatrix, this.cameraToScreen, this.worldToCamera);\r\n\r\n    // Reset highlight entity.\r\n    this.highlightEntity = null;\r\n    let minDistance = highlightThreshold;\r\n\r\n    this.queries.selectableEntities.results.forEach((entity) => {\r\n      const transform = entity.getComponent(TransformData3D) as TransformData3D;\r\n      const selectable = entity.getComponent(\r\n        SelectableObject\r\n      ) as SelectableObject;\r\n\r\n      // Transform the object position to screen space.\r\n      const screenPos = vec3.create();\r\n      vec3.transformMat4(\r\n        screenPos,\r\n        transform.position.value,\r\n        worldToScreenMatrix\r\n      );\r\n\r\n      // Drop the z value.\r\n      if (screenPos[2] < 1) {\r\n        return;\r\n      }\r\n\r\n      // Find the closest entity to the mouse.\r\n      const distance = vec2.distance(\r\n        this.mousePosition,\r\n        vec2.fromValues(screenPos[0], screenPos[1])\r\n      );\r\n      if (distance < minDistance) {\r\n        this.highlightEntity = entity;\r\n        minDistance = distance;\r\n      }\r\n    });\r\n\r\n    // Draw the highlight entity.\r\n    if (this.highlightEntity) {\r\n      const transform = (this.highlightEntity as Entity).getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n\r\n      // Transform the object position to screen space.\r\n      const screenPos = vec3.create();\r\n      vec3.transformMat4(\r\n        screenPos,\r\n        transform.position.value,\r\n        worldToScreenMatrix\r\n      );\r\n\r\n      // Draw the highlight.\r\n      this.canvasContext.strokeStyle = \"black\";\r\n      this.canvasContext.beginPath();\r\n      this.canvasContext.arc(\r\n        screenPos[0],\r\n        screenPos[1],\r\n        highlightThreshold,\r\n        0,\r\n        2 * Math.PI\r\n      );\r\n      this.canvasContext.stroke();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the mouse position in screen space.\r\n   *\r\n   * @param event canvas mouse event.\r\n   * @returns mouse position in screen space.\r\n   */\r\n  getMousePos(event: MouseEvent): vec2 {\r\n    const rect = this.mainCanvas.getBoundingClientRect();\r\n    return vec2.fromValues(event.clientX - rect.left, event.clientY - rect.top);\r\n  }\r\n}\r\n", "/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};", "import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"white-dwarf/Core/ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class ClothInitData extends Component<ClothInitData> {\r\n  static schema: ComponentSchema = {\r\n    width: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n    height: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n    resolution: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n  };\r\n\r\n  width!: number;\r\n  height!: number;\r\n  resolution!: number;\r\n}\r\n", "import { Entity } from \"ecsy/Entity\";\r\nimport { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { World } from \"ecsy/World\";\r\nimport { vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"white-dwarf/Core/Locomotion/DataComponent/TransformData3D\";\r\nimport {\r\n  Constraint,\r\n  ConstraintData,\r\n} from \"white-dwarf/Core/Physics/DataComponents/ConstraintData\";\r\nimport { MassData } from \"white-dwarf/Core/Physics/DataComponents/MassData\";\r\nimport { SyncTransform3DData } from \"white-dwarf/Core/Physics/DataComponents/SyncTransform3DData\";\r\nimport { VerletVelocityData3D } from \"white-dwarf/Core/Physics/DataComponents/VerletVelocityData3D\";\r\nimport { SelectableObject } from \"white-dwarf/Utils/TagComponents/SelectableObject\";\r\nimport { ClothInitData } from \"../DataComponents/ClothInitData\";\r\n\r\nexport class ClothInitSystem extends System {\r\n  static queries: SystemQueries = {\r\n    clothInitEntities: {\r\n      components: [TransformData3D, ClothInitData],\r\n    },\r\n  };\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    const mainWorld: World = attributes?.mainWorld as World;\r\n    const physicsWorld: World = attributes?.physicsWorld as World;\r\n\r\n    this.queries.clothInitEntities.results.forEach((clothInitEntity) => {\r\n      // Get transform.\r\n      const transform = clothInitEntity.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      // Get rope init data.\r\n      const initData = clothInitEntity.getComponent(\r\n        ClothInitData\r\n      ) as ClothInitData;\r\n\r\n      // Add two roots.\r\n      const position1 = transform.position.clone();\r\n      vec3.add(\r\n        position1.value,\r\n        position1.value,\r\n        vec3.fromValues(-(initData.width * initData.resolution) / 2, 0, 0)\r\n      );\r\n      const root1 = mainWorld\r\n        .createEntity(\"Cloth Root 1\")\r\n        .addComponent(SelectableObject)\r\n        .addComponent(TransformData3D, {\r\n          position: position1,\r\n        });\r\n      const physicsRoot1 = physicsWorld\r\n        .createEntity(\"Cloth Root 1\")\r\n        .addComponent(TransformData3D, {\r\n          position: position1,\r\n        });\r\n\r\n      root1.addComponent(SyncTransform3DData, {\r\n        targetTransform: physicsRoot1.getMutableComponent(\r\n          TransformData3D\r\n        ) as TransformData3D,\r\n      });\r\n\r\n      const position2 = transform.position.clone();\r\n      vec3.add(\r\n        position2.value,\r\n        position2.value,\r\n        vec3.fromValues((initData.width * initData.resolution) / 2, 0, 0)\r\n      );\r\n      const root2 = mainWorld\r\n        .createEntity(\"Cloth Root 2\")\r\n        .addComponent(SelectableObject)\r\n        .addComponent(TransformData3D, {\r\n          position: position2,\r\n        });\r\n      const physicsRoot2 = physicsWorld\r\n        .createEntity(\"Cloth Root 2\")\r\n        .addComponent(TransformData3D, {\r\n          position: position2,\r\n        });\r\n\r\n      root2.addComponent(SyncTransform3DData, {\r\n        targetTransform: physicsRoot2.getMutableComponent(\r\n          TransformData3D\r\n        ) as TransformData3D,\r\n      });\r\n\r\n      // Cloth 2D array of size width * height.\r\n      const cloth: ([Entity, Entity] | null)[][] = [];\r\n      for (let i = 0; i < initData.height; i++) {\r\n        cloth.push([]);\r\n        for (let j = 0; j < initData.width; j++) {\r\n          cloth[i].push(null);\r\n        }\r\n      }\r\n\r\n      // Init roots.\r\n      cloth[0][0] = [root1, physicsRoot1];\r\n      cloth[0][initData.width - 1] = [root2, physicsRoot2];\r\n\r\n      // Add cloth.\r\n      for (let i = 0; i < initData.height; i++) {\r\n        for (let j = 0; j < initData.width; j++) {\r\n          if (cloth[i][j] === null) {\r\n            // Add cloth.\r\n            const position = transform.position.clone();\r\n            vec3.add(\r\n              position.value,\r\n              position.value,\r\n              vec3.fromValues(\r\n                -(initData.width * initData.resolution) / 2 +\r\n                  j * initData.resolution,\r\n                -i * initData.resolution,\r\n                0\r\n              )\r\n            );\r\n            cloth[i][j] = [\r\n              mainWorld\r\n                .createEntity(\"Cloth Node\")\r\n                .addComponent(TransformData3D, {\r\n                  position: position,\r\n                }),\r\n              physicsWorld\r\n                .createEntity(\"Cloth Node\")\r\n                .addComponent(TransformData3D, {\r\n                  position: position,\r\n                })\r\n                .addComponent(VerletVelocityData3D)\r\n                .addComponent(MassData, {\r\n                  mass: 0.1,\r\n                }),\r\n            ];\r\n\r\n            // Sync transform.\r\n            const [mainEntity, physicsEntity] = cloth[i][j] as [Entity, Entity];\r\n            physicsEntity.addComponent(SyncTransform3DData, {\r\n              targetTransform: mainEntity.getMutableComponent(\r\n                TransformData3D\r\n              ) as TransformData3D,\r\n            });\r\n            mainEntity.addComponent(SyncTransform3DData, {\r\n              targetTransform: physicsEntity.getMutableComponent(\r\n                TransformData3D\r\n              ) as TransformData3D,\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add constraints.\r\n      for (let i = 0; i < initData.height; i++) {\r\n        for (let j = 0; j < initData.width; j++) {\r\n          // Skip root.\r\n          if (i === 0 && (j === 0 || j === initData.width - 1)) {\r\n            continue;\r\n          }\r\n          const [mainEntity, physicsEntity] = cloth[i][j] as [Entity, Entity];\r\n          mainEntity.addComponent(ConstraintData, {\r\n            constraints: [],\r\n          });\r\n          physicsEntity.addComponent(ConstraintData, {\r\n            constraints: [],\r\n          });\r\n\r\n          if (i > 0) {\r\n            // Add constraint with upper node.\r\n            const upperNode = cloth[i - 1][j] as [Entity, Entity];\r\n            if (upperNode !== null) {\r\n              this.addConstraint(upperNode[0], initData, mainEntity);\r\n              this.addConstraint(upperNode[1], initData, physicsEntity);\r\n            }\r\n          }\r\n          if (i < initData.height - 1) {\r\n            // Add constraint with lower node.\r\n            const lowerNode = cloth[i + 1][j] as [Entity, Entity];\r\n            if (lowerNode !== null) {\r\n              this.addConstraint(lowerNode[0], initData, mainEntity);\r\n              this.addConstraint(lowerNode[1], initData, physicsEntity);\r\n            }\r\n          }\r\n          if (j > 0) {\r\n            // Add constraint with left node.\r\n            const leftNode = cloth[i][j - 1] as [Entity, Entity];\r\n            if (leftNode !== null) {\r\n              this.addConstraint(leftNode[0], initData, mainEntity);\r\n              this.addConstraint(leftNode[1], initData, physicsEntity);\r\n            }\r\n          }\r\n          if (j < initData.width - 1) {\r\n            // Add constraint with right node.\r\n            const rightNode = cloth[i][j + 1] as [Entity, Entity];\r\n            if (rightNode !== null) {\r\n              this.addConstraint(rightNode[0], initData, mainEntity);\r\n              this.addConstraint(rightNode[1], initData, physicsEntity);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private addConstraint(\r\n    target: Entity,\r\n    initData: ClothInitData,\r\n    entity: Entity\r\n  ) {\r\n    const constraint = new Constraint(target, initData.resolution);\r\n    entity?.getMutableComponent(ConstraintData)?.constraints.push(constraint);\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Do nothing.\r\n  }\r\n}\r\n", "import { SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"white-dwarf/Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { Canvas3DRenderer } from \"white-dwarf/Core/Render/System/Canvas3DRenderer\";\r\nimport { ClothInitData } from \"../DataComponents/ClothInitData\";\r\n\r\nexport class ClothPreviewRenderer extends Canvas3DRenderer {\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    ropeEntities: {\r\n      components: [TransformData3D, ClothInitData],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Generate world to screen matrix.\r\n    const worldToScreen = mat4.multiply(\r\n      mat4.create(),\r\n      this.cameraToScreen,\r\n      this.worldToCamera\r\n    );\r\n\r\n    this.queries.ropeEntities.results.forEach((ropeEntity) => {\r\n      // Get transform.\r\n      const transform = ropeEntity.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      // Get rope init data.\r\n      const ropeInitData = ropeEntity.getComponent(\r\n        ClothInitData\r\n      ) as ClothInitData;\r\n\r\n      const topCorner = vec3.add(\r\n        vec3.create(),\r\n        transform.position.value,\r\n        vec3.fromValues(\r\n          (-ropeInitData.width * ropeInitData.resolution) / 2,\r\n          0,\r\n          0\r\n        )\r\n      );\r\n      for (let i = 0; i <= ropeInitData.height; i++) {\r\n        for (let j = 0; j <= ropeInitData.width; j++) {\r\n          const currPos = vec3.transformMat4(\r\n            vec3.create(),\r\n            vec3.add(\r\n              vec3.create(),\r\n              topCorner,\r\n              vec3.fromValues(\r\n                j * ropeInitData.resolution,\r\n                -i * ropeInitData.resolution,\r\n                0\r\n              )\r\n            ),\r\n            worldToScreen\r\n          );\r\n\r\n          if (i > 0) {\r\n            const prevPos = vec3.transformMat4(\r\n              vec3.create(),\r\n              vec3.add(\r\n                vec3.create(),\r\n                topCorner,\r\n                vec3.fromValues(\r\n                  j * ropeInitData.resolution,\r\n                  -(i - 1) * ropeInitData.resolution,\r\n                  0\r\n                )\r\n              ),\r\n              worldToScreen\r\n            );\r\n            this.drawLine(prevPos, currPos, \"black\", 1);\r\n          }\r\n          if (i < ropeInitData.height - 1) {\r\n            const nextPos = vec3.transformMat4(\r\n              vec3.create(),\r\n              vec3.add(\r\n                vec3.create(),\r\n                topCorner,\r\n                vec3.fromValues(\r\n                  j * ropeInitData.resolution,\r\n                  -(i + 1) * ropeInitData.resolution,\r\n                  0\r\n                )\r\n              ),\r\n              worldToScreen\r\n            );\r\n            this.drawLine(nextPos, currPos, \"black\", 1);\r\n          }\r\n          if (j > 0) {\r\n            const prevPos = vec3.transformMat4(\r\n              vec3.create(),\r\n              vec3.add(\r\n                vec3.create(),\r\n                topCorner,\r\n                vec3.fromValues(\r\n                  (j - 1) * ropeInitData.resolution,\r\n                  -i * ropeInitData.resolution,\r\n                  0\r\n                )\r\n              ),\r\n              worldToScreen\r\n            );\r\n            this.drawLine(prevPos, currPos, \"black\", 1);\r\n          }\r\n          if (j < ropeInitData.width - 1) {\r\n            const nextPos = vec3.transformMat4(\r\n              vec3.create(),\r\n              vec3.add(\r\n                vec3.create(),\r\n                topCorner,\r\n                vec3.fromValues(\r\n                  (j + 1) * ropeInitData.resolution,\r\n                  -i * ropeInitData.resolution,\r\n                  0\r\n                )\r\n              ),\r\n              worldToScreen\r\n            );\r\n            this.drawLine(nextPos, currPos, \"black\", 1);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n", "import { Component, ComponentSchema } from \"ecsy/Component\";\r\nimport { Types } from \"ecsy/Types\";\r\nimport { IComponent } from \"white-dwarf/Core/ComponentRegistry\";\r\n\r\n@IComponent.register\r\nexport class RopeInitData extends Component<RopeInitData> {\r\n  static schema: ComponentSchema = {\r\n    length: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n    resolution: {\r\n      type: Types.Number,\r\n      default: 0,\r\n    },\r\n  };\r\n\r\n  length!: number;\r\n  resolution!: number;\r\n}\r\n", "import { Attributes, System, SystemQueries } from \"ecsy/System\";\r\nimport { World } from \"ecsy/World\";\r\nimport { mainWorld } from \"white-dwarf/Core\";\r\nimport { TransformData3D } from \"white-dwarf/Core/Locomotion/DataComponent/TransformData3D\";\r\nimport {\r\n  ConstraintData,\r\n  Constraint,\r\n} from \"white-dwarf/Core/Physics/DataComponents/ConstraintData\";\r\nimport { MassData } from \"white-dwarf/Core/Physics/DataComponents/MassData\";\r\nimport { SyncTransform3DData } from \"white-dwarf/Core/Physics/DataComponents/SyncTransform3DData\";\r\nimport { VerletVelocityData3D } from \"white-dwarf/Core/Physics/DataComponents/VerletVelocityData3D\";\r\nimport { Vector3 } from \"white-dwarf/Mathematics/Vector3\";\r\nimport { SelectableObject } from \"white-dwarf/Utils/TagComponents/SelectableObject\";\r\nimport { RopeInitData } from \"../DataComponents/RopeInitData\";\r\n\r\nexport class RopeInitSystem extends System {\r\n  static queries: SystemQueries = {\r\n    ropeInitEntities: {\r\n      components: [TransformData3D, RopeInitData],\r\n    },\r\n  };\r\n\r\n  init(attributes?: Attributes | undefined): void {\r\n    const mainWorld: World = attributes?.mainWorld as World;\r\n    const physicsWorld: World = attributes?.physicsWorld as World;\r\n\r\n    this.queries.ropeInitEntities.results.forEach((ropeInitEntity) => {\r\n      // Get transform.\r\n      const transform = ropeInitEntity.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      // Get rope init data.\r\n      const initData = ropeInitEntity.getComponent(\r\n        RopeInitData\r\n      ) as RopeInitData;\r\n\r\n      // Add a rope.\r\n      let curr = mainWorld\r\n        .createEntity(\"Rope Root\")\r\n        .addComponent(SelectableObject)\r\n        .addComponent(TransformData3D, {\r\n          position: transform.position.clone(),\r\n        });\r\n\r\n      let physicsCurr = physicsWorld\r\n        .createEntity(\"Rope Root\")\r\n        .addComponent(TransformData3D, {\r\n          position: transform.position.clone(),\r\n        });\r\n\r\n      curr.addComponent(SyncTransform3DData, {\r\n        targetTransform: physicsCurr.getMutableComponent(\r\n          TransformData3D\r\n        ) as TransformData3D,\r\n      });\r\n\r\n      const ropeResolution = initData.resolution;\r\n      for (let i = 0; i < initData.length; i++) {\r\n        let next = mainWorld\r\n          .createEntity(\"Rope Node\")\r\n          .addComponent(TransformData3D, {\r\n            position: new Vector3(\r\n              transform.position.value[0],\r\n              transform.position.value[1] - i * ropeResolution,\r\n              transform.position.value[2]\r\n            ),\r\n          })\r\n          .addComponent(ConstraintData, {\r\n            constraints: [new Constraint(curr, ropeResolution)],\r\n          });\r\n\r\n        curr\r\n          .getComponent(ConstraintData)\r\n          ?.constraints.push(new Constraint(next, ropeResolution));\r\n\r\n        curr = next;\r\n\r\n        let physicsNext = physicsWorld\r\n          .createEntity(\"Rope Node\")\r\n          .addComponent(TransformData3D, {\r\n            position: new Vector3(\r\n              transform.position.value[0],\r\n              transform.position.value[1] - i * ropeResolution,\r\n              transform.position.value[2]\r\n            ),\r\n          })\r\n          .addComponent(VerletVelocityData3D)\r\n          .addComponent(MassData, {\r\n            mass: 0.1,\r\n          })\r\n          .addComponent(ConstraintData, {\r\n            constraints: [new Constraint(physicsCurr, ropeResolution)],\r\n          });\r\n\r\n        physicsCurr\r\n          .getComponent(ConstraintData)\r\n          ?.constraints.push(new Constraint(physicsNext, ropeResolution));\r\n\r\n        physicsCurr = physicsNext;\r\n\r\n        physicsCurr.addComponent(SyncTransform3DData, {\r\n          targetTransform: curr.getMutableComponent(\r\n            TransformData3D\r\n          ) as TransformData3D,\r\n        });\r\n\r\n        curr.addComponent(SyncTransform3DData, {\r\n          targetTransform: physicsCurr.getMutableComponent(\r\n            TransformData3D\r\n          ) as TransformData3D,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  execute(delta: number, time: number): void {\r\n    // Do nothing.\r\n  }\r\n}\r\n", "import { SystemQueries } from \"ecsy/System\";\r\nimport { mat4, vec3 } from \"gl-matrix\";\r\nimport { TransformData3D } from \"white-dwarf/Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { Canvas3DRenderer } from \"white-dwarf/Core/Render/System/Canvas3DRenderer\";\r\nimport { RopeInitData } from \"../DataComponents/RopeInitData\";\r\n\r\nexport class RopePreviewRenderer extends Canvas3DRenderer {\r\n  static queries: SystemQueries = {\r\n    ...this.queries,\r\n    ropeEntities: {\r\n      components: [TransformData3D, RopeInitData],\r\n    },\r\n  };\r\n\r\n  execute(delta: number, time: number): void {\r\n    try {\r\n      super.execute(delta, time);\r\n    } catch (error) {\r\n      console.warn(error);\r\n      return;\r\n    }\r\n\r\n    // Generate world to camera matrix.\r\n    this.generateWorldToCameraMatrix();\r\n    // Generate camera to screen matrix.\r\n    this.generateCameraToScreenMatrix();\r\n\r\n    // Generate world to screen matrix.\r\n    const worldToScreen = mat4.multiply(\r\n      mat4.create(),\r\n      this.cameraToScreen,\r\n      this.worldToCamera\r\n    );\r\n\r\n    this.queries.ropeEntities.results.forEach((ropeEntity) => {\r\n      // Get transform.\r\n      const transform = ropeEntity.getComponent(\r\n        TransformData3D\r\n      ) as TransformData3D;\r\n      // Get rope init data.\r\n      const ropeInitData = ropeEntity.getComponent(\r\n        RopeInitData\r\n      ) as RopeInitData;\r\n\r\n      const startPos = vec3.transformMat4(\r\n        vec3.create(),\r\n        transform.position.value,\r\n        worldToScreen\r\n      );\r\n\r\n      const endPos = vec3.transformMat4(\r\n        vec3.create(),\r\n        vec3.add(\r\n          vec3.create(),\r\n          transform.position.value,\r\n          vec3.fromValues(0, -ropeInitData.length * ropeInitData.resolution, 0)\r\n        ),\r\n        worldToScreen\r\n      );\r\n\r\n      this.drawLine(startPos, endPos, \"black\", 1);\r\n    });\r\n  }\r\n}\r\n", "import { mainWorld, physicsWorld } from \"white-dwarf/Core\";\r\nimport { coreRenderContext } from \"white-dwarf/Core/Context/RenderContext\";\r\nimport { CoreStartProps } from \"white-dwarf/Core/Context/SystemContext\";\r\nimport { systemContext } from \"white-dwarf/Core/CoreSetup\";\r\nimport { TransformData3D } from \"white-dwarf/Core/Locomotion/DataComponent/TransformData3D\";\r\nimport { EulerVelocityGravitySystem } from \"white-dwarf/Core/Physics/Systems/EulerVelocity3DGravitySystem\";\r\nimport { EulerVelocity3DMoveSystem } from \"white-dwarf/Core/Physics/Systems/EulerVelocity3DMoveSystem\";\r\nimport { JakobsenConstraintSystem } from \"white-dwarf/Core/Physics/Systems/JakobsenConstraintSystem\";\r\nimport { Transform3DSyncSystem } from \"white-dwarf/Core/Physics/Systems/Transform3DSyncSystem\";\r\nimport { VerletVelocity3DGravitySystem } from \"white-dwarf/Core/Physics/Systems/VerletVelocity3DGravitySystem\";\r\nimport { VerletVelocity3DMoveSystem } from \"white-dwarf/Core/Physics/Systems/VerletVelocity3DMoveSystem\";\r\nimport { PerspectiveCameraData3D } from \"white-dwarf/Core/Render/DataComponent/PerspectiveCameraData3D\";\r\nimport { RenderSystem3DRegister } from \"white-dwarf/Core/Render/RenderSystem3DRegister\";\r\nimport { MainCameraInitSystem } from \"white-dwarf/Core/Render/System/MainCameraInitSystem\";\r\nimport { MainCameraTag } from \"white-dwarf/Core/Render/TagComponent/MainCameraTag\";\r\nimport {\r\n  WorldSerializer,\r\n  IWorldObject,\r\n} from \"white-dwarf/Core/Serialization/WorldSerializer\";\r\nimport { EditorSystem3DRegister } from \"white-dwarf/Editor/EditorSystem3DRegister\";\r\nimport { EditorCamTagAppendSystem } from \"white-dwarf/Editor/System/EditorCamTagAppendSystem\";\r\nimport { EditorViewPort3DSystem } from \"white-dwarf/Editor/System/EditorViewPort3DSystem\";\r\nimport { Vector3 } from \"white-dwarf/Mathematics/Vector3\";\r\nimport { Cam3DDragSystem } from \"white-dwarf/Utils/System/Cam3DDragSystem\";\r\nimport { Object3DSelectSystem } from \"white-dwarf/Utils/System/Object3DSelectSystem\";\r\nimport { ClothInitSystem } from \"./Systems/ClothInitSystem\";\r\nimport { ClothPreviewRenderer } from \"./Systems/ClothPreviewRenderer\";\r\nimport { RopeInitSystem } from \"./Systems/RopeInitSystem\";\r\nimport { RopePreviewRenderer } from \"./Systems/RopePreviewRenderer\";\r\n\r\nexport const main = () => {\r\n  systemContext.coreSetup = () => {\r\n    if (coreRenderContext.mainCanvas) {\r\n      new RenderSystem3DRegister(coreRenderContext.mainCanvas).register(\r\n        mainWorld\r\n      );\r\n    }\r\n  };\r\n\r\n  systemContext.coreStart = async (props: CoreStartProps) => {\r\n    // If in editor mode, deserialize the world.\r\n    if (props.worldObject) {\r\n      WorldSerializer.deserializeWorld(mainWorld, props.worldObject);\r\n    } else {\r\n      // Read world.json.\r\n      const worldObject = (await fetch(\"assets/rope_world.json\").then(\r\n        (response) => response.json()\r\n      )) as IWorldObject;\r\n      // Deserialize the world.\r\n      WorldSerializer.deserializeWorld(mainWorld, worldObject);\r\n    }\r\n\r\n    // Register main camera init system.\r\n    mainWorld.registerSystem(MainCameraInitSystem);\r\n\r\n    // // Register follow system.\r\n    // mainWorld.registerSystem(FollowPositionSystem);\r\n\r\n    // Register Euler move and gravity system.\r\n    physicsWorld\r\n      .registerSystem(EulerVelocity3DMoveSystem)\r\n      .registerSystem(EulerVelocityGravitySystem);\r\n    // Register Verlet move and gravity system.\r\n    physicsWorld\r\n      .registerSystem(VerletVelocity3DMoveSystem, {\r\n        priority: 100,\r\n      })\r\n      .registerSystem(VerletVelocity3DGravitySystem);\r\n    // Register constraint system.\r\n    physicsWorld.registerSystem(JakobsenConstraintSystem, {\r\n      jakobsenIterations: 5,\r\n    });\r\n\r\n    // Register physics sync system.\r\n    mainWorld.registerSystem(Transform3DSyncSystem, {\r\n      priority: -1000,\r\n    });\r\n    physicsWorld.registerSystem(Transform3DSyncSystem, {\r\n      priority: 1000,\r\n    });\r\n\r\n    // Register rope and cloth init system.\r\n    mainWorld\r\n      .registerSystem(RopeInitSystem, {\r\n        mainWorld: mainWorld,\r\n        physicsWorld: physicsWorld,\r\n      })\r\n      .registerSystem(ClothInitSystem, {\r\n        mainWorld: mainWorld,\r\n        physicsWorld: physicsWorld,\r\n      });\r\n\r\n    // Register camera drag system and view port system.\r\n    mainWorld\r\n      .registerSystem(Cam3DDragSystem, {\r\n        mainCanvas: coreRenderContext.mainCanvas,\r\n      })\r\n      .registerSystem(EditorViewPort3DSystem, {\r\n        mainCanvas: coreRenderContext.mainCanvas,\r\n      })\r\n      .registerSystem(Object3DSelectSystem, {\r\n        mainCanvas: coreRenderContext.mainCanvas,\r\n      });\r\n  };\r\n\r\n  systemContext.editorStart = () => {\r\n    // Add a editor cam.\r\n    mainWorld\r\n      .createEntity(\"Editor Main Camera\")\r\n      .addComponent(TransformData3D, {\r\n        position: new Vector3(0, 0, -10),\r\n      })\r\n      .addComponent(PerspectiveCameraData3D, {\r\n        fov: Math.PI / 2,\r\n      })\r\n      .addComponent(MainCameraTag);\r\n\r\n    // Register Editor System.\r\n    if (coreRenderContext.mainCanvas) {\r\n      new EditorSystem3DRegister(coreRenderContext.mainCanvas).register(\r\n        mainWorld\r\n      );\r\n    }\r\n\r\n    // Register preview systems.\r\n    mainWorld\r\n      .registerSystem(RopePreviewRenderer, {\r\n        mainCanvas: coreRenderContext.mainCanvas,\r\n      })\r\n      .registerSystem(ClothPreviewRenderer, {\r\n        mainCanvas: coreRenderContext.mainCanvas,\r\n      });\r\n\r\n    // Setup editor scene camera.\r\n    try {\r\n      mainWorld.registerSystem(EditorCamTagAppendSystem);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n};\r\n", "import { releaseInit } from \"white-dwarf/Core\";\r\nimport { coreRenderContext } from \"white-dwarf/Core/Context/RenderContext\";\r\nimport { main } from \".\";\r\n\r\nwindow.onload = () => {\r\n  // Setup main canvas.\r\n  coreRenderContext.mainCanvas = document.getElementById(\r\n    \"mainCanvas\"\r\n  ) as HTMLCanvasElement;\r\n\r\n  // Disable right click.\r\n  coreRenderContext.mainCanvas.oncontextmenu = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  // Resize main canvas.\r\n  coreRenderContext.mainCanvas.width = coreRenderContext.mainCanvas.clientWidth;\r\n  coreRenderContext.mainCanvas.height =\r\n    coreRenderContext.mainCanvas.clientHeight;\r\n\r\n  // Development main.\r\n  main();\r\n\r\n  // White Dwarf Main\r\n  releaseInit();\r\n};\r\n\r\nwindow.onresize = () => {\r\n  // Resize main canvas.\r\n  if (coreRenderContext.mainCanvas) {\r\n    coreRenderContext.mainCanvas.width =\r\n      coreRenderContext.mainCanvas.clientWidth;\r\n    coreRenderContext.mainCanvas.height =\r\n      coreRenderContext.mainCanvas.clientHeight;\r\n  }\r\n};\r\n"],
  "mappings": "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MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AAClG,QAAI,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACpG,QAAI,KAAK,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AAClG,QAAI,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACpG,QAAI,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACpG,QAAI,KAAK,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AAClG,QAAI,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACpG,QAAI,KAAK,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AAClG,QAAI,KAAK,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AAClG,QAAI,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACpG,QAAI,MAAM,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACnG,QAAI,MAAM,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACrG,QAAI,MAAM,EAAE,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACrG,QAAI,MAAM,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM,OAAO,OAAO,MAAM,MAAM,MAAM;AACnG,QAAI,M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",
  "names": ["ReflectApply", "ReflectOwnKeys", "NumberIsNaN", "EventEmitter", "len", "once", "copy", "clone", "Component", "EventEmitter", "clone", "Component", "Component", "Component", "Component", "System", "IComponent", "scale", "add", "adjoint", "clone", "copy", "create", "determinant", "equals", "exactEquals", "frob", "fromQuat", "fromRotation", "fromScaling", "fromTranslation", "fromValues", "identity", "invert", "mul", "multiply", "multiplyScalar", "multiplyScalarAndAdd", "rotate", "scale", "set", "str", "sub", "subtract", "translate", "transpose", "create", "clone", "copy", "fromValues", "set", "identity", "transpose", "invert", "adjoint", "determinant", "multiply", "translate", "scale", "rotate", "len", "fromTranslation", "fromScaling", "fromRotation", "fromQuat", "str", "frob", "add", "subtract", "multiplyScalar", "multiplyScalarAndAdd", "exactEquals", "equals", "mul", "sub", "add", "clone", "copy", "create", "dot", "equals", "exactEquals", "fromValues", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "random", "rotateX", "rotateY", "rotateZ", "scale", "set", "sqrLen", "squaredLength", "str", "add", "clone", "copy", "create", "equals", "exactEquals", "fromValues", "mul", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "set", "str", "sub", "subtract", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "scale", "len", "rotateX", "rotateY", "rotateZ", "str", "exactEquals", "equals", "sub", "mul", "create", "clone", "fromValues", "copy", "set", "add", "scale", "length", "squaredLength", "normalize", "len", "dot", "lerp", "exactEquals", "equals", "forEach", "create", "create", "identity", "dot", "multiply", "rotateX", "rotateY", "rotateZ", "scale", "random", "invert", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "add", "angle", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "rotate", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat3", "transformMat4", "zero", "create", "clone", "fromValues", "copy", "set", "add", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "length", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "lerp", "random", "transformMat3", "transformMat4", "rotate", "angle", "zero", "str", "exactEquals", "equals", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "Component", "length", "distance", "GRAVITY_ACCELERATION", "perspective", "component", "distance", "component", "componentObject", "fileDownload", "addComponentButton", "componentList", "highlightThreshold", "distance", "EPSILON", "ARRAY_TYPE", "RANDOM", "degree", "mat4_exports", "add", "adjoint", "clone", "copy", "create", "determinant", "equals", "exactEquals", "frob", "fromQuat", "fromQuat2", "fromRotation", "fromRotationTranslation", "fromRotationTranslationScale", "fromRotationTranslationScaleOrigin", "fromScaling", "fromTranslation", "fromValues", "fromXRotation", "fromYRotation", "fromZRotation", "frustum", "getRotation", "getScaling", "getTranslation", "identity", "invert", "lookAt", "mul", "multiply", "multiplyScalar", "multiplyScalarAndAdd", "ortho", "orthoNO", "orthoZO", "perspective", "perspectiveFromFieldOfView", "perspectiveNO", "perspectiveZO", "rotate", "rotateX", "rotateY", "rotateZ", "scale", "set", "str", "sub", "subtract", "targetTo", "translate", "transpose", "create", "ARRAY_TYPE", "clone", "copy", "fromValues", "set", "identity", "transpose", "invert", "adjoint", "determinant", "multiply", "translate", "scale", "rotate", "len", "EPSILON", "rotateX", "rotateY", "rotateZ", "fromTranslation", "fromScaling", "fromRotation", "fromXRotation", "fromYRotation", "fromZRotation", "fromRotationTranslation", "fromQuat2", "getTranslation", "getScaling", "getRotation", "fromRotationTranslationScale", "fromRotationTranslationScaleOrigin", "fromQuat", "frustum", "perspectiveNO", "perspective", "perspectiveZO", "perspectiveFromFieldOfView", "orthoNO", "ortho", "orthoZO", "lookAt", "targetTo", "str", "frob", "add", "subtract", "multiplyScalar", "multiplyScalarAndAdd", "exactEquals", "equals", "mul", "sub", "vec3_exports", "add", "angle", "bezier", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "hermite", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "rotateX", "rotateY", "rotateZ", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat3", "transformMat4", "transformQuat", "zero", "create", "ARRAY_TYPE", "clone", "length", "fromValues", "copy", "set", "add", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "lerp", "hermite", "bezier", "random", "RANDOM", "transformMat4", "transformMat3", "transformQuat", "rotateX", "rotateY", "rotateZ", "angle", "zero", "str", "exactEquals", "equals", "EPSILON", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "mainWorld", "physicsWorld", "vec3_exports", "mat4_exports", "vec3_exports", "mainWorld", "physicsWorld", "mat4_exports", "vec3_exports"]
}
